<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 16 Programming in R | PLSC 31101: Computational Tools for Social Science</title>
  <meta name="description" content="This book contains course notes and other materials for PLSC 31101." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 16 Programming in R | PLSC 31101: Computational Tools for Social Science" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://rochelleterman.github.io/plsc-31101/" />
  
  <meta property="og:description" content="This book contains course notes and other materials for PLSC 31101." />
  <meta name="github-repo" content="rochelleterman/plsc-31101" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 16 Programming in R | PLSC 31101: Computational Tools for Social Science" />
  
  <meta name="twitter:description" content="This book contains course notes and other materials for PLSC 31101." />
  

<meta name="author" content="Rochelle Terman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="strings-and-regular-expressions.html"/>
<link rel="next" href="collecting-data-from-the-web.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">PLSC 31101</a></li>

<li class="divider"></li>
<li class="part"><span><b>I Before Class</b></span></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Syllabus</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#course-description"><i class="fa fa-check"></i><b>1.1</b> Course Description</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#who-should-take-this-course"><i class="fa fa-check"></i><b>1.2</b> Who should take this course</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#requirements-and-evaluation"><i class="fa fa-check"></i><b>1.3</b> Requirements and Evaluation</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#activities-and-materials"><i class="fa fa-check"></i><b>1.4</b> Activities and Materials</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#curriculum-outline-schedule"><i class="fa fa-check"></i><b>1.5</b> Curriculum Outline / Schedule</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a><ul>
<li class="chapter" data-level="2.1" data-path="installation.html"><a href="installation.html#r"><i class="fa fa-check"></i><b>2.1</b> R</a></li>
<li class="chapter" data-level="2.2" data-path="installation.html"><a href="installation.html#r-studio"><i class="fa fa-check"></i><b>2.2</b> R Studio</a></li>
<li class="chapter" data-level="2.3" data-path="installation.html"><a href="installation.html#r-packages"><i class="fa fa-check"></i><b>2.3</b> R Packages</a></li>
<li class="chapter" data-level="2.4" data-path="installation.html"><a href="installation.html#latex"><i class="fa fa-check"></i><b>2.4</b> LaTex</a></li>
<li class="chapter" data-level="2.5" data-path="installation.html"><a href="installation.html#the-bash-shell"><i class="fa fa-check"></i><b>2.5</b> The Bash Shell</a></li>
<li class="chapter" data-level="2.6" data-path="installation.html"><a href="installation.html#git"><i class="fa fa-check"></i><b>2.6</b> Git</a></li>
<li class="chapter" data-level="2.7" data-path="installation.html"><a href="installation.html#other-helpful-tools"><i class="fa fa-check"></i><b>2.7</b> Other helpful tools</a></li>
<li class="chapter" data-level="2.8" data-path="installation.html"><a href="installation.html#testing-your-installation"><i class="fa fa-check"></i><b>2.8</b> Testing your installation</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="homework-rubric.html"><a href="homework-rubric.html"><i class="fa fa-check"></i><b>3</b> Homework Rubric</a></li>
<li class="part"><span><b>II Course Notes</b></span></li>
<li class="chapter" data-level="4" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>4</b> Introduction</a><ul>
<li class="chapter" data-level="4.1" data-path="introduction.html"><a href="introduction.html#the-motivation"><i class="fa fa-check"></i><b>4.1</b> The Motivation</a></li>
<li class="chapter" data-level="4.2" data-path="introduction.html"><a href="introduction.html#about-this-class"><i class="fa fa-check"></i><b>4.2</b> About This Class</a></li>
<li class="chapter" data-level="4.3" data-path="introduction.html"><a href="introduction.html#learning-how-to-program"><i class="fa fa-check"></i><b>4.3</b> Learning How to Program</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>5</b> R Basics</a><ul>
<li class="chapter" data-level="5.1" data-path="r-basics.html"><a href="r-basics.html#what-is-r"><i class="fa fa-check"></i><b>5.1</b> What is R?</a></li>
<li class="chapter" data-level="5.2" data-path="r-basics.html"><a href="r-basics.html#r-studio-1"><i class="fa fa-check"></i><b>5.2</b> R Studio</a><ul>
<li class="chapter" data-level="5.2.1" data-path="r-basics.html"><a href="r-basics.html#console"><i class="fa fa-check"></i><b>5.2.1</b> Console</a></li>
<li class="chapter" data-level="5.2.2" data-path="r-basics.html"><a href="r-basics.html#scripts"><i class="fa fa-check"></i><b>5.2.2</b> Scripts</a></li>
<li class="chapter" data-level="5.2.3" data-path="r-basics.html"><a href="r-basics.html#running-code"><i class="fa fa-check"></i><b>5.2.3</b> Running code</a></li>
<li class="chapter" data-level="5.2.4" data-path="r-basics.html"><a href="r-basics.html#comments"><i class="fa fa-check"></i><b>5.2.4</b> Comments</a></li>
<li class="chapter" data-level="5.2.5" data-path="r-basics.html"><a href="r-basics.html#diagnostics-and-errors"><i class="fa fa-check"></i><b>5.2.5</b> Diagnostics and errors</a></li>
<li class="chapter" data-level="5.2.6" data-path="r-basics.html"><a href="r-basics.html#errors-messages-and-warnings"><i class="fa fa-check"></i><b>5.2.6</b> Errors, Messages, and Warnings</a></li>
<li class="chapter" data-level="5.2.7" data-path="r-basics.html"><a href="r-basics.html#r-environment"><i class="fa fa-check"></i><b>5.2.7</b> R Environment</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="r-basics.html"><a href="r-basics.html#r-packages-1"><i class="fa fa-check"></i><b>5.3</b> R Packages</a><ul>
<li class="chapter" data-level="5.3.1" data-path="r-basics.html"><a href="r-basics.html#installing-packages"><i class="fa fa-check"></i><b>5.3.1</b> Installing Packages</a></li>
<li class="chapter" data-level="5.3.2" data-path="r-basics.html"><a href="r-basics.html#loading-packages"><i class="fa fa-check"></i><b>5.3.2</b> Loading Packages</a></li>
<li class="chapter" data-level="5.3.3" data-path="r-basics.html"><a href="r-basics.html#challenges"><i class="fa fa-check"></i><b>5.3.3</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="r-basics.html"><a href="r-basics.html#r-markdown"><i class="fa fa-check"></i><b>5.4</b> R Markdown</a><ul>
<li class="chapter" data-level="5.4.1" data-path="r-basics.html"><a href="r-basics.html#yaml-header"><i class="fa fa-check"></i><b>5.4.1</b> YAML header</a></li>
<li class="chapter" data-level="5.4.2" data-path="r-basics.html"><a href="r-basics.html#markdown"><i class="fa fa-check"></i><b>5.4.2</b> Markdown</a></li>
<li class="chapter" data-level="5.4.3" data-path="r-basics.html"><a href="r-basics.html#code-chunks"><i class="fa fa-check"></i><b>5.4.3</b> Code Chunks</a></li>
<li class="chapter" data-level="5.4.4" data-path="r-basics.html"><a href="r-basics.html#knitting"><i class="fa fa-check"></i><b>5.4.4</b> Knitting</a></li>
<li class="chapter" data-level="5.4.5" data-path="r-basics.html"><a href="r-basics.html#cheatsheets-and-other-resources"><i class="fa fa-check"></i><b>5.4.5</b> Cheatsheets and Other Resources</a></li>
<li class="chapter" data-level="5.4.6" data-path="r-basics.html"><a href="r-basics.html#challenges-1"><i class="fa fa-check"></i><b>5.4.6</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-syntax.html"><a href="r-syntax.html"><i class="fa fa-check"></i><b>6</b> R Syntax</a><ul>
<li class="chapter" data-level="6.1" data-path="r-syntax.html"><a href="r-syntax.html#variables"><i class="fa fa-check"></i><b>6.1</b> Variables</a><ul>
<li class="chapter" data-level="6.1.1" data-path="r-syntax.html"><a href="r-syntax.html#arithmetic"><i class="fa fa-check"></i><b>6.1.1</b> Arithmetic</a></li>
<li class="chapter" data-level="6.1.2" data-path="r-syntax.html"><a href="r-syntax.html#assigning-variables"><i class="fa fa-check"></i><b>6.1.2</b> Assigning Variables</a></li>
<li class="chapter" data-level="6.1.3" data-path="r-syntax.html"><a href="r-syntax.html#variable-names"><i class="fa fa-check"></i><b>6.1.3</b> Variable Names</a></li>
<li class="chapter" data-level="6.1.4" data-path="r-syntax.html"><a href="r-syntax.html#challenges-2"><i class="fa fa-check"></i><b>6.1.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="r-syntax.html"><a href="r-syntax.html#functions"><i class="fa fa-check"></i><b>6.2</b> Functions</a><ul>
<li class="chapter" data-level="6.2.1" data-path="r-syntax.html"><a href="r-syntax.html#arguments"><i class="fa fa-check"></i><b>6.2.1</b> Arguments</a></li>
<li class="chapter" data-level="6.2.2" data-path="r-syntax.html"><a href="r-syntax.html#store-function-output"><i class="fa fa-check"></i><b>6.2.2</b> Store Function Output</a></li>
<li class="chapter" data-level="6.2.3" data-path="r-syntax.html"><a href="r-syntax.html#argument-restrictions-and-defaults"><i class="fa fa-check"></i><b>6.2.3</b> Argument Restrictions and Defaults</a></li>
<li class="chapter" data-level="6.2.4" data-path="r-syntax.html"><a href="r-syntax.html#documentation-and-help-files"><i class="fa fa-check"></i><b>6.2.4</b> Documentation and Help Files</a></li>
<li class="chapter" data-level="6.2.5" data-path="r-syntax.html"><a href="r-syntax.html#challenges-3"><i class="fa fa-check"></i><b>6.2.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="r-syntax.html"><a href="r-syntax.html#data-types"><i class="fa fa-check"></i><b>6.3</b> Data Types</a><ul>
<li class="chapter" data-level="6.3.1" data-path="r-syntax.html"><a href="r-syntax.html#whats-that-type"><i class="fa fa-check"></i><b>6.3.1</b> What’s that Type?</a></li>
<li class="chapter" data-level="6.3.2" data-path="r-syntax.html"><a href="r-syntax.html#coercion"><i class="fa fa-check"></i><b>6.3.2</b> Coercion</a></li>
<li class="chapter" data-level="6.3.3" data-path="r-syntax.html"><a href="r-syntax.html#other-objects"><i class="fa fa-check"></i><b>6.3.3</b> Other Objects</a></li>
<li class="chapter" data-level="6.3.4" data-path="r-syntax.html"><a href="r-syntax.html#challenges-4"><i class="fa fa-check"></i><b>6.3.4</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html"><i class="fa fa-check"></i><b>7</b> Data Classes and Structures</a><ul>
<li class="chapter" data-level="7.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#vectors"><i class="fa fa-check"></i><b>7.1</b> Vectors</a><ul>
<li class="chapter" data-level="7.1.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-vectors"><i class="fa fa-check"></i><b>7.1.1</b> Creating Vectors</a></li>
<li class="chapter" data-level="7.1.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-a-vector"><i class="fa fa-check"></i><b>7.1.2</b> Naming a Vector</a></li>
<li class="chapter" data-level="7.1.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#calculations-on-vectors"><i class="fa fa-check"></i><b>7.1.3</b> Calculations on Vectors</a></li>
<li class="chapter" data-level="7.1.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#types-of-vectors"><i class="fa fa-check"></i><b>7.1.4</b> Types of Vectors</a></li>
<li class="chapter" data-level="7.1.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#coercion-1"><i class="fa fa-check"></i><b>7.1.5</b> Coercion</a></li>
<li class="chapter" data-level="7.1.6" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-5"><i class="fa fa-check"></i><b>7.1.6</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#lists"><i class="fa fa-check"></i><b>7.2</b> Lists</a><ul>
<li class="chapter" data-level="7.2.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-lists"><i class="fa fa-check"></i><b>7.2.1</b> Creating Lists</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-lists"><i class="fa fa-check"></i><b>7.2.2</b> Naming Lists</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#list-structure"><i class="fa fa-check"></i><b>7.2.3</b> List Structure</a></li>
<li class="chapter" data-level="7.2.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-6"><i class="fa fa-check"></i><b>7.2.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#factors"><i class="fa fa-check"></i><b>7.3</b> Factors</a><ul>
<li class="chapter" data-level="7.3.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-factors"><i class="fa fa-check"></i><b>7.3.1</b> Creating Factors</a></li>
<li class="chapter" data-level="7.3.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#summarizing-a-factor"><i class="fa fa-check"></i><b>7.3.2</b> Summarizing a Factor</a></li>
<li class="chapter" data-level="7.3.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#changing-factor-levels"><i class="fa fa-check"></i><b>7.3.3</b> Changing Factor Levels</a></li>
<li class="chapter" data-level="7.3.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#factors-are-integers"><i class="fa fa-check"></i><b>7.3.4</b> Factors are Integers</a></li>
<li class="chapter" data-level="7.3.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-7"><i class="fa fa-check"></i><b>7.3.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#matrices"><i class="fa fa-check"></i><b>7.4</b> Matrices</a><ul>
<li class="chapter" data-level="7.4.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-matrices"><i class="fa fa-check"></i><b>7.4.1</b> Creating Matrices</a></li>
<li class="chapter" data-level="7.4.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#matrix-dimensions"><i class="fa fa-check"></i><b>7.4.2</b> Matrix Dimensions</a></li>
<li class="chapter" data-level="7.4.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#matrix-names"><i class="fa fa-check"></i><b>7.4.3</b> Matrix Names</a></li>
<li class="chapter" data-level="7.4.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenge"><i class="fa fa-check"></i><b>7.4.4</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#dataframes"><i class="fa fa-check"></i><b>7.5</b> Dataframes</a><ul>
<li class="chapter" data-level="7.5.1" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#creating-dataframes"><i class="fa fa-check"></i><b>7.5.1</b> Creating Dataframes</a></li>
<li class="chapter" data-level="7.5.2" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#the-structure-of-dataframes"><i class="fa fa-check"></i><b>7.5.2</b> The Structure of Dataframes</a></li>
<li class="chapter" data-level="7.5.3" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#naming-dataframes"><i class="fa fa-check"></i><b>7.5.3</b> Naming Dataframes</a></li>
<li class="chapter" data-level="7.5.4" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#coercing-dataframes"><i class="fa fa-check"></i><b>7.5.4</b> Coercing Dataframes</a></li>
<li class="chapter" data-level="7.5.5" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#challenges-8"><i class="fa fa-check"></i><b>7.5.5</b> Challenges</a></li>
<li class="chapter" data-level="7.5.6" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#quiz"><i class="fa fa-check"></i><b>7.5.6</b> Quiz</a></li>
<li class="chapter" data-level="7.5.7" data-path="data-classes-and-structures.html"><a href="data-classes-and-structures.html#data-structure-answers"><i class="fa fa-check"></i><b>7.5.7</b> Answers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="subsetting.html"><a href="subsetting.html"><i class="fa fa-check"></i><b>8</b> Subsetting</a><ul>
<li class="chapter" data-level="8.1" data-path="subsetting.html"><a href="subsetting.html#subsetting-vectors"><i class="fa fa-check"></i><b>8.1</b> Subsetting Vectors</a><ul>
<li class="chapter" data-level="8.1.1" data-path="subsetting.html"><a href="subsetting.html#subsetting-types"><i class="fa fa-check"></i><b>8.1.1</b> Subsetting Types</a></li>
<li class="chapter" data-level="8.1.2" data-path="subsetting.html"><a href="subsetting.html#conditional-subsetting"><i class="fa fa-check"></i><b>8.1.2</b> Conditional Subsetting</a></li>
<li class="chapter" data-level="8.1.3" data-path="subsetting.html"><a href="subsetting.html#challenge-1"><i class="fa fa-check"></i><b>8.1.3</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="subsetting.html"><a href="subsetting.html#subsetting-lists"><i class="fa fa-check"></i><b>8.2</b> Subsetting Lists</a><ul>
<li class="chapter" data-level="8.2.1" data-path="subsetting.html"><a href="subsetting.html#with"><i class="fa fa-check"></i><b>8.2.1</b> With <code>[</code></a></li>
<li class="chapter" data-level="8.2.2" data-path="subsetting.html"><a href="subsetting.html#with-1"><i class="fa fa-check"></i><b>8.2.2</b> With <code>[[</code></a></li>
<li class="chapter" data-level="8.2.3" data-path="subsetting.html"><a href="subsetting.html#with-2"><i class="fa fa-check"></i><b>8.2.3</b> with <code>$</code></a></li>
<li class="chapter" data-level="8.2.4" data-path="subsetting.html"><a href="subsetting.html#challenge-2"><i class="fa fa-check"></i><b>8.2.4</b> Challenge</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="subsetting.html"><a href="subsetting.html#subsetting-matrices"><i class="fa fa-check"></i><b>8.3</b> Subsetting Matrices</a></li>
<li class="chapter" data-level="8.4" data-path="subsetting.html"><a href="subsetting.html#subsetting-dataframes"><i class="fa fa-check"></i><b>8.4</b> Subsetting Dataframes</a><ul>
<li class="chapter" data-level="8.4.1" data-path="subsetting.html"><a href="subsetting.html#subsetting-names-and"><i class="fa fa-check"></i><b>8.4.1</b> Subsetting Names and <code>$</code></a></li>
<li class="chapter" data-level="8.4.2" data-path="subsetting.html"><a href="subsetting.html#conditional-subsetting-1"><i class="fa fa-check"></i><b>8.4.2</b> Conditional Subsetting</a></li>
<li class="chapter" data-level="8.4.3" data-path="subsetting.html"><a href="subsetting.html#list-like-and-matrix-like-subsetting"><i class="fa fa-check"></i><b>8.4.3</b> List-Like and Matrix-Like Subsetting</a></li>
<li class="chapter" data-level="8.4.4" data-path="subsetting.html"><a href="subsetting.html#challenges-9"><i class="fa fa-check"></i><b>8.4.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="subsetting.html"><a href="subsetting.html#sub-assignment"><i class="fa fa-check"></i><b>8.5</b> Sub-assignment</a><ul>
<li class="chapter" data-level="8.5.1" data-path="subsetting.html"><a href="subsetting.html#basics-of-sub-assignment"><i class="fa fa-check"></i><b>8.5.1</b> Basics of Sub-assignment</a></li>
<li class="chapter" data-level="8.5.2" data-path="subsetting.html"><a href="subsetting.html#recycling"><i class="fa fa-check"></i><b>8.5.2</b> Recycling</a></li>
<li class="chapter" data-level="8.5.3" data-path="subsetting.html"><a href="subsetting.html#applications"><i class="fa fa-check"></i><b>8.5.3</b> Applications</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="working-with-data.html"><a href="working-with-data.html"><i class="fa fa-check"></i><b>9</b> Working with Data</a><ul>
<li class="chapter" data-level="9.1" data-path="working-with-data.html"><a href="working-with-data.html#project-workflow"><i class="fa fa-check"></i><b>9.1</b> Project Workflow</a><ul>
<li class="chapter" data-level="9.1.1" data-path="working-with-data.html"><a href="working-with-data.html#store-analyses-in-scripts-not-workspaces."><i class="fa fa-check"></i><b>9.1.1</b> Store Analyses in Scripts, Not Workspaces.</a></li>
<li class="chapter" data-level="9.1.2" data-path="working-with-data.html"><a href="working-with-data.html#working-directories-and-paths"><i class="fa fa-check"></i><b>9.1.2</b> Working Directories and Paths</a></li>
<li class="chapter" data-level="9.1.3" data-path="working-with-data.html"><a href="working-with-data.html#r-projects"><i class="fa fa-check"></i><b>9.1.3</b> R Projects</a></li>
<li class="chapter" data-level="9.1.4" data-path="working-with-data.html"><a href="working-with-data.html#file-organization"><i class="fa fa-check"></i><b>9.1.4</b> File Organization</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="working-with-data.html"><a href="working-with-data.html#introduction-to-data"><i class="fa fa-check"></i><b>9.2</b> Introduction to Data</a><ul>
<li class="chapter" data-level="9.2.1" data-path="working-with-data.html"><a href="working-with-data.html#wheres-my-data"><i class="fa fa-check"></i><b>9.2.1</b> Where’s my data?</a></li>
<li class="chapter" data-level="9.2.2" data-path="working-with-data.html"><a href="working-with-data.html#data-storage"><i class="fa fa-check"></i><b>9.2.2</b> Data Storage</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="working-with-data.html"><a href="working-with-data.html#importing-and-exporting"><i class="fa fa-check"></i><b>9.3</b> Importing and Exporting</a><ul>
<li class="chapter" data-level="9.3.1" data-path="working-with-data.html"><a href="working-with-data.html#importing-data"><i class="fa fa-check"></i><b>9.3.1</b> Importing Data</a></li>
<li class="chapter" data-level="9.3.2" data-path="working-with-data.html"><a href="working-with-data.html#exporting-data"><i class="fa fa-check"></i><b>9.3.2</b> Exporting Data</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="working-with-data.html"><a href="working-with-data.html#exploring-data"><i class="fa fa-check"></i><b>9.4</b> Exploring Data</a><ul>
<li class="chapter" data-level="9.4.1" data-path="working-with-data.html"><a href="working-with-data.html#the-gapminder-dataset"><i class="fa fa-check"></i><b>9.4.1</b> The Gapminder Dataset</a></li>
<li class="chapter" data-level="9.4.2" data-path="working-with-data.html"><a href="working-with-data.html#structure-and-dimensions"><i class="fa fa-check"></i><b>9.4.2</b> Structure and Dimensions</a></li>
<li class="chapter" data-level="9.4.3" data-path="working-with-data.html"><a href="working-with-data.html#common-alterations"><i class="fa fa-check"></i><b>9.4.3</b> Common Alterations</a></li>
<li class="chapter" data-level="9.4.4" data-path="working-with-data.html"><a href="working-with-data.html#summary-statistics"><i class="fa fa-check"></i><b>9.4.4</b> Summary statistics</a></li>
<li class="chapter" data-level="9.4.5" data-path="working-with-data.html"><a href="working-with-data.html#review-of-subsetting"><i class="fa fa-check"></i><b>9.4.5</b> Review of Subsetting</a></li>
<li class="chapter" data-level="9.4.6" data-path="working-with-data.html"><a href="working-with-data.html#basic-plotting"><i class="fa fa-check"></i><b>9.4.6</b> Basic Plotting</a></li>
<li class="chapter" data-level="9.4.7" data-path="working-with-data.html"><a href="working-with-data.html#challenges-10"><i class="fa fa-check"></i><b>9.4.7</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>10</b> Data Transformation</a><ul>
<li class="chapter" data-level="10.1" data-path="data-transformation.html"><a href="data-transformation.html#introduction-1"><i class="fa fa-check"></i><b>10.1</b> Introduction</a><ul>
<li class="chapter" data-level="10.1.1" data-path="data-transformation.html"><a href="data-transformation.html#tidyverse"><i class="fa fa-check"></i><b>10.1.1</b> <code>tidyverse</code></a></li>
<li class="chapter" data-level="10.1.2" data-path="data-transformation.html"><a href="data-transformation.html#gapminder"><i class="fa fa-check"></i><b>10.1.2</b> Gapminder</a></li>
<li class="chapter" data-level="10.1.3" data-path="data-transformation.html"><a href="data-transformation.html#why-dplyr"><i class="fa fa-check"></i><b>10.1.3</b> Why <code>dplyr</code>?</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="data-transformation.html"><a href="data-transformation.html#dplyr-functions"><i class="fa fa-check"></i><b>10.2</b> <code>dplyr</code> Functions</a><ul>
<li class="chapter" data-level="10.2.1" data-path="data-transformation.html"><a href="data-transformation.html#select-columns-with-select"><i class="fa fa-check"></i><b>10.2.1</b> Select Columns with <code>select</code></a></li>
<li class="chapter" data-level="10.2.2" data-path="data-transformation.html"><a href="data-transformation.html#the-pipe"><i class="fa fa-check"></i><b>10.2.2</b> The Pipe</a></li>
<li class="chapter" data-level="10.2.3" data-path="data-transformation.html"><a href="data-transformation.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>10.2.3</b> Filter Rows with <code>filter</code></a></li>
<li class="chapter" data-level="10.2.4" data-path="data-transformation.html"><a href="data-transformation.html#calculate-across-groups-with-group_by"><i class="fa fa-check"></i><b>10.2.4</b> Calculate Across Groups with <code>group_by</code></a></li>
<li class="chapter" data-level="10.2.5" data-path="data-transformation.html"><a href="data-transformation.html#summarize-across-groups-with-summarize"><i class="fa fa-check"></i><b>10.2.5</b> Summarize Across Groups with <code>summarize</code></a></li>
<li class="chapter" data-level="10.2.6" data-path="data-transformation.html"><a href="data-transformation.html#add-new-variables-with-mutate"><i class="fa fa-check"></i><b>10.2.6</b> Add New Variables with <code>mutate</code></a></li>
<li class="chapter" data-level="10.2.7" data-path="data-transformation.html"><a href="data-transformation.html#arrange-rows-with-arrange"><i class="fa fa-check"></i><b>10.2.7</b> Arrange Rows with <code>arrange</code></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-transformation.html"><a href="data-transformation.html#dplyr-and-non-standard-evaluation"><i class="fa fa-check"></i><b>10.3</b> <code>dplyr</code> and “Non-Standard Evaluation”</a></li>
<li class="chapter" data-level="10.4" data-path="data-transformation.html"><a href="data-transformation.html#challenges-11"><i class="fa fa-check"></i><b>10.4</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tidying-data.html"><a href="tidying-data.html"><i class="fa fa-check"></i><b>11</b> Tidying Data</a><ul>
<li class="chapter" data-level="11.1" data-path="tidying-data.html"><a href="tidying-data.html#wide-vs.long-formats"><i class="fa fa-check"></i><b>11.1</b> Wide vs. Long Formats</a></li>
<li class="chapter" data-level="11.2" data-path="tidying-data.html"><a href="tidying-data.html#tidying-the-gapminder-data"><i class="fa fa-check"></i><b>11.2</b> Tidying the Gapminder Data</a></li>
<li class="chapter" data-level="11.3" data-path="tidying-data.html"><a href="tidying-data.html#tidyr-functions"><i class="fa fa-check"></i><b>11.3</b> <code>tidyr</code> Functions</a><ul>
<li class="chapter" data-level="11.3.1" data-path="tidying-data.html"><a href="tidying-data.html#gather"><i class="fa fa-check"></i><b>11.3.1</b> <code>gather</code></a></li>
<li class="chapter" data-level="11.3.2" data-path="tidying-data.html"><a href="tidying-data.html#separate"><i class="fa fa-check"></i><b>11.3.2</b> <code>separate</code></a></li>
<li class="chapter" data-level="11.3.3" data-path="tidying-data.html"><a href="tidying-data.html#spread"><i class="fa fa-check"></i><b>11.3.3</b> <code>spread</code></a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="tidying-data.html"><a href="tidying-data.html#more-tidyverse"><i class="fa fa-check"></i><b>11.4</b> More <code>tidyverse</code></a></li>
<li class="chapter" data-level="11.5" data-path="tidying-data.html"><a href="tidying-data.html#challenges-12"><i class="fa fa-check"></i><b>11.5</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>12</b> Relational Data</a><ul>
<li class="chapter" data-level="12.1" data-path="relational-data.html"><a href="relational-data.html#why-relational-data"><i class="fa fa-check"></i><b>12.1</b> Why Relational Data</a></li>
<li class="chapter" data-level="12.2" data-path="relational-data.html"><a href="relational-data.html#keys"><i class="fa fa-check"></i><b>12.2</b> Keys</a></li>
<li class="chapter" data-level="12.3" data-path="relational-data.html"><a href="relational-data.html#joins"><i class="fa fa-check"></i><b>12.3</b> Joins</a></li>
<li class="chapter" data-level="12.4" data-path="relational-data.html"><a href="relational-data.html#defining-keys"><i class="fa fa-check"></i><b>12.4</b> Defining Keys</a></li>
<li class="chapter" data-level="12.5" data-path="relational-data.html"><a href="relational-data.html#duplicate-keys"><i class="fa fa-check"></i><b>12.5</b> Duplicate Keys</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>13</b> Plotting</a><ul>
<li class="chapter" data-level="13.1" data-path="plotting.html"><a href="plotting.html#the-dataset"><i class="fa fa-check"></i><b>13.1</b> The Dataset</a></li>
<li class="chapter" data-level="13.2" data-path="plotting.html"><a href="plotting.html#r-base-graphics"><i class="fa fa-check"></i><b>13.2</b> R Base Graphics</a><ul>
<li class="chapter" data-level="13.2.1" data-path="plotting.html"><a href="plotting.html#scatter-and-line-plots"><i class="fa fa-check"></i><b>13.2.1</b> Scatter and Line Plots</a></li>
<li class="chapter" data-level="13.2.2" data-path="plotting.html"><a href="plotting.html#histograms-and-density-plots"><i class="fa fa-check"></i><b>13.2.2</b> Histograms and Density Plots</a></li>
<li class="chapter" data-level="13.2.3" data-path="plotting.html"><a href="plotting.html#labels"><i class="fa fa-check"></i><b>13.2.3</b> Labels</a></li>
<li class="chapter" data-level="13.2.4" data-path="plotting.html"><a href="plotting.html#axis-and-size-scaling"><i class="fa fa-check"></i><b>13.2.4</b> Axis and Size Scaling</a></li>
<li class="chapter" data-level="13.2.5" data-path="plotting.html"><a href="plotting.html#graphical-parameters"><i class="fa fa-check"></i><b>13.2.5</b> Graphical Parameters</a></li>
<li class="chapter" data-level="13.2.6" data-path="plotting.html"><a href="plotting.html#annotations-reference-lines-and-legends"><i class="fa fa-check"></i><b>13.2.6</b> Annotations, Reference Lines, and Legends</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="plotting.html"><a href="plotting.html#ggplot2"><i class="fa fa-check"></i><b>13.3</b> ggplot2</a><ul>
<li class="chapter" data-level="13.3.1" data-path="plotting.html"><a href="plotting.html#grammar"><i class="fa fa-check"></i><b>13.3.1</b> Grammar</a></li>
<li class="chapter" data-level="13.3.2" data-path="plotting.html"><a href="plotting.html#anatomy-of-aes"><i class="fa fa-check"></i><b>13.3.2</b> Anatomy of <code>aes</code></a></li>
<li class="chapter" data-level="13.3.3" data-path="plotting.html"><a href="plotting.html#layers"><i class="fa fa-check"></i><b>13.3.3</b> Layers</a></li>
<li class="chapter" data-level="13.3.4" data-path="plotting.html"><a href="plotting.html#labels-1"><i class="fa fa-check"></i><b>13.3.4</b> Labels</a></li>
<li class="chapter" data-level="13.3.5" data-path="plotting.html"><a href="plotting.html#transformations-and-stats"><i class="fa fa-check"></i><b>13.3.5</b> Transformations and Stats</a></li>
<li class="chapter" data-level="13.3.6" data-path="plotting.html"><a href="plotting.html#facets"><i class="fa fa-check"></i><b>13.3.6</b> Facets</a></li>
<li class="chapter" data-level="13.3.7" data-path="plotting.html"><a href="plotting.html#putting-everything-together"><i class="fa fa-check"></i><b>13.3.7</b> Putting Everything Together</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="plotting.html"><a href="plotting.html#saving-plots"><i class="fa fa-check"></i><b>13.4</b> Saving plots</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="statistical-inferences.html"><a href="statistical-inferences.html"><i class="fa fa-check"></i><b>14</b> Statistical Inferences</a><ul>
<li class="chapter" data-level="14.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#statistical-distributions"><i class="fa fa-check"></i><b>14.1</b> Statistical Distributions</a><ul>
<li class="chapter" data-level="14.1.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#sampling-and-simulation"><i class="fa fa-check"></i><b>14.1.1</b> Sampling and Simulation</a></li>
<li class="chapter" data-level="14.1.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#random-seeds"><i class="fa fa-check"></i><b>14.1.2</b> Random Seeds</a></li>
<li class="chapter" data-level="14.1.3" data-path="statistical-inferences.html"><a href="statistical-inferences.html#challenges-13"><i class="fa fa-check"></i><b>14.1.3</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#inferences-and-regressions"><i class="fa fa-check"></i><b>14.2</b> Inferences and Regressions</a><ul>
<li class="chapter" data-level="14.2.1" data-path="statistical-inferences.html"><a href="statistical-inferences.html#statistical-tests"><i class="fa fa-check"></i><b>14.2.1</b> Statistical Tests</a></li>
<li class="chapter" data-level="14.2.2" data-path="statistical-inferences.html"><a href="statistical-inferences.html#regressions-and-linear-models"><i class="fa fa-check"></i><b>14.2.2</b> Regressions and Linear Models</a></li>
<li class="chapter" data-level="14.2.3" data-path="statistical-inferences.html"><a href="statistical-inferences.html#regression-output"><i class="fa fa-check"></i><b>14.2.3</b> Regression Output</a></li>
<li class="chapter" data-level="14.2.4" data-path="statistical-inferences.html"><a href="statistical-inferences.html#interactions"><i class="fa fa-check"></i><b>14.2.4</b> Interactions</a></li>
<li class="chapter" data-level="14.2.5" data-path="statistical-inferences.html"><a href="statistical-inferences.html#formatting-regression-tables"><i class="fa fa-check"></i><b>14.2.5</b> Formatting Regression Tables</a></li>
<li class="chapter" data-level="14.2.6" data-path="statistical-inferences.html"><a href="statistical-inferences.html#challenges-14"><i class="fa fa-check"></i><b>14.2.6</b> Challenges</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html"><i class="fa fa-check"></i><b>15</b> Strings and Regular Expressions</a><ul>
<li class="chapter" data-level="15.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#string-basics"><i class="fa fa-check"></i><b>15.1</b> String Basics</a><ul>
<li class="chapter" data-level="15.1.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#creating-strings"><i class="fa fa-check"></i><b>15.1.1</b> Creating Strings</a></li>
<li class="chapter" data-level="15.1.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-and-special-characters"><i class="fa fa-check"></i><b>15.1.2</b> Escape and Special Characters</a></li>
<li class="chapter" data-level="15.1.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#string-length"><i class="fa fa-check"></i><b>15.1.3</b> String length</a></li>
<li class="chapter" data-level="15.1.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#combining-strings"><i class="fa fa-check"></i><b>15.1.4</b> Combining strings</a></li>
<li class="chapter" data-level="15.1.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#subsetting-strings"><i class="fa fa-check"></i><b>15.1.5</b> Subsetting strings</a></li>
<li class="chapter" data-level="15.1.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#locales"><i class="fa fa-check"></i><b>15.1.6</b> Locales</a></li>
<li class="chapter" data-level="" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#challenges-15"><i class="fa fa-check"></i>Challenges</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regular-expressions"><i class="fa fa-check"></i><b>15.2</b> Regular expressions</a><ul>
<li class="chapter" data-level="15.2.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#basic-matches"><i class="fa fa-check"></i><b>15.2.1</b> Basic matches</a></li>
<li class="chapter" data-level="15.2.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#escape-characters"><i class="fa fa-check"></i><b>15.2.2</b> Escape Characters</a></li>
<li class="chapter" data-level="15.2.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#anchors"><i class="fa fa-check"></i><b>15.2.3</b> Anchors</a></li>
<li class="chapter" data-level="15.2.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#character-classes-and-alternatives"><i class="fa fa-check"></i><b>15.2.4</b> Character classes and alternatives</a></li>
<li class="chapter" data-level="15.2.5" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#repetition"><i class="fa fa-check"></i><b>15.2.5</b> Repetition</a></li>
<li class="chapter" data-level="15.2.6" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#regex-resources"><i class="fa fa-check"></i><b>15.2.6</b> Regex Resources</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#common-tools"><i class="fa fa-check"></i><b>15.3</b> Common Tools</a><ul>
<li class="chapter" data-level="15.3.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#detect-matches"><i class="fa fa-check"></i><b>15.3.1</b> Detect matches</a></li>
<li class="chapter" data-level="15.3.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#extract-matches"><i class="fa fa-check"></i><b>15.3.2</b> Extract matches</a></li>
<li class="chapter" data-level="15.3.3" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#replacing-matches"><i class="fa fa-check"></i><b>15.3.3</b> Replacing matches</a></li>
<li class="chapter" data-level="15.3.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#splitting"><i class="fa fa-check"></i><b>15.3.4</b> Splitting</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#other-types-of-patterns"><i class="fa fa-check"></i><b>15.4</b> Other types of patterns</a><ul>
<li class="chapter" data-level="15.4.1" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#stringi"><i class="fa fa-check"></i><b>15.4.1</b> stringi</a></li>
<li class="chapter" data-level="15.4.2" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#challenges-20"><i class="fa fa-check"></i><b>15.4.2</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="strings-and-regular-expressions.html"><a href="strings-and-regular-expressions.html#acknowledgments-5"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="programming-in-r.html"><a href="programming-in-r.html"><i class="fa fa-check"></i><b>16</b> Programming in R</a><ul>
<li class="chapter" data-level="16.1" data-path="programming-in-r.html"><a href="programming-in-r.html#conditional-flow"><i class="fa fa-check"></i><b>16.1</b> Conditional Flow</a><ul>
<li class="chapter" data-level="16.1.1" data-path="programming-in-r.html"><a href="programming-in-r.html#multiple-conditions"><i class="fa fa-check"></i><b>16.1.1</b> Multiple Conditions</a></li>
<li class="chapter" data-level="16.1.2" data-path="programming-in-r.html"><a href="programming-in-r.html#complex-statements"><i class="fa fa-check"></i><b>16.1.2</b> Complex Statements</a></li>
<li class="chapter" data-level="16.1.3" data-path="programming-in-r.html"><a href="programming-in-r.html#code-style"><i class="fa fa-check"></i><b>16.1.3</b> Code Style</a></li>
<li class="chapter" data-level="16.1.4" data-path="programming-in-r.html"><a href="programming-in-r.html#if-vs.-if_else"><i class="fa fa-check"></i><b>16.1.4</b> <code>if</code> vs. <code>if_else</code></a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="programming-in-r.html"><a href="programming-in-r.html#functions-1"><i class="fa fa-check"></i><b>16.2</b> Functions</a><ul>
<li class="chapter" data-level="16.2.1" data-path="programming-in-r.html"><a href="programming-in-r.html#why-write-functions"><i class="fa fa-check"></i><b>16.2.1</b> Why Write Functions?</a></li>
<li class="chapter" data-level="16.2.2" data-path="programming-in-r.html"><a href="programming-in-r.html#anatomy-of-a-function"><i class="fa fa-check"></i><b>16.2.2</b> Anatomy of a Function</a></li>
<li class="chapter" data-level="16.2.3" data-path="programming-in-r.html"><a href="programming-in-r.html#writing-a-function"><i class="fa fa-check"></i><b>16.2.3</b> Writing a Function</a></li>
<li class="chapter" data-level="16.2.4" data-path="programming-in-r.html"><a href="programming-in-r.html#using-a-function"><i class="fa fa-check"></i><b>16.2.4</b> Using a Function</a></li>
<li class="chapter" data-level="16.2.5" data-path="programming-in-r.html"><a href="programming-in-r.html#variable-scope"><i class="fa fa-check"></i><b>16.2.5</b> Variable Scope</a></li>
<li class="chapter" data-level="16.2.6" data-path="programming-in-r.html"><a href="programming-in-r.html#arguments-1"><i class="fa fa-check"></i><b>16.2.6</b> Arguments</a></li>
<li class="chapter" data-level="16.2.7" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-21"><i class="fa fa-check"></i><b>16.2.7</b> Challenges</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="programming-in-r.html"><a href="programming-in-r.html#iteration"><i class="fa fa-check"></i><b>16.3</b> Iteration</a><ul>
<li class="chapter" data-level="16.3.1" data-path="programming-in-r.html"><a href="programming-in-r.html#vectorized-functions"><i class="fa fa-check"></i><b>16.3.1</b> Vectorized Functions</a></li>
<li class="chapter" data-level="16.3.2" data-path="programming-in-r.html"><a href="programming-in-r.html#for-loops"><i class="fa fa-check"></i><b>16.3.2</b> For-loops</a></li>
<li class="chapter" data-level="16.3.3" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-22"><i class="fa fa-check"></i><b>16.3.3</b> Challenges</a></li>
<li class="chapter" data-level="16.3.4" data-path="programming-in-r.html"><a href="programming-in-r.html#functional-programming-and-map"><i class="fa fa-check"></i><b>16.3.4</b> Functional Programming and <code>map</code></a></li>
<li class="chapter" data-level="16.3.5" data-path="programming-in-r.html"><a href="programming-in-r.html#challenges-23"><i class="fa fa-check"></i><b>16.3.5</b> Challenges</a></li>
<li class="chapter" data-level="16.3.6" data-path="programming-in-r.html"><a href="programming-in-r.html#scoped-verbs"><i class="fa fa-check"></i><b>16.3.6</b> Scoped Verbs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html"><i class="fa fa-check"></i><b>17</b> Collecting Data from the Web</a><ul>
<li class="chapter" data-level="17.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#introduction-2"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#web-apis"><i class="fa fa-check"></i><b>17.2</b> Web APIs</a><ul>
<li class="chapter" data-level="17.2.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#some-basic-terminology"><i class="fa fa-check"></i><b>17.2.1</b> Some Basic Terminology</a></li>
<li class="chapter" data-level="17.2.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#how-do-get-requests-work"><i class="fa fa-check"></i><b>17.2.2</b> How Do GET Requests Work?</a></li>
<li class="chapter" data-level="17.2.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#finding-apis"><i class="fa fa-check"></i><b>17.2.3</b> Finding APIs</a></li>
<li class="chapter" data-level="17.2.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#getting-api-access"><i class="fa fa-check"></i><b>17.2.4</b> Getting API Access</a></li>
<li class="chapter" data-level="17.2.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#using-apis-in-r"><i class="fa fa-check"></i><b>17.2.5</b> Using APIs in R</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#collecting-twitter-data-with-rtweet"><i class="fa fa-check"></i><b>17.3</b> Collecting Twitter Data with RTweet</a><ul>
<li class="chapter" data-level="17.3.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#setting-up-rtweet"><i class="fa fa-check"></i><b>17.3.1</b> Setting up <code>RTweet</code></a></li>
<li class="chapter" data-level="17.3.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#uchicago-political-science-prof-tweets"><i class="fa fa-check"></i><b>17.3.2</b> UChicago Political Science Prof Tweets</a></li>
<li class="chapter" data-level="17.3.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#hashtags-and-text-strings"><i class="fa fa-check"></i><b>17.3.3</b> Hashtags and Text Strings</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#writing-api-queries"><i class="fa fa-check"></i><b>17.4</b> Writing API Queries</a><ul>
<li class="chapter" data-level="17.4.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#constructing-the-api-get-request"><i class="fa fa-check"></i><b>17.4.1</b> Constructing the API GET Request</a></li>
<li class="chapter" data-level="17.4.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#parsing-the-response"><i class="fa fa-check"></i><b>17.4.2</b> Parsing the response</a></li>
<li class="chapter" data-level="17.4.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#iteration-through-results-pager"><i class="fa fa-check"></i><b>17.4.3</b> Iteration through results pager</a></li>
<li class="chapter" data-level="17.4.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#visualizing-results"><i class="fa fa-check"></i><b>17.4.4</b> Visualizing Results</a></li>
<li class="chapter" data-level="17.4.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#more-resources-1"><i class="fa fa-check"></i><b>17.4.5</b> More resources</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#webscraping"><i class="fa fa-check"></i><b>17.5</b> Webscraping</a><ul>
<li class="chapter" data-level="17.5.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#whats-a-website"><i class="fa fa-check"></i><b>17.5.1</b> What’s a website?</a></li>
<li class="chapter" data-level="17.5.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#html"><i class="fa fa-check"></i><b>17.5.2</b> HTML</a></li>
<li class="chapter" data-level="17.5.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#css"><i class="fa fa-check"></i><b>17.5.3</b> CSS</a></li>
<li class="chapter" data-level="17.5.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#finding-elements-with-selector-gadget"><i class="fa fa-check"></i><b>17.5.4</b> Finding Elements with Selector Gadget</a></li>
</ul></li>
<li class="chapter" data-level="17.6" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#scraping-presidential-statements"><i class="fa fa-check"></i><b>17.6</b> Scraping Presidential Statements</a><ul>
<li class="chapter" data-level="17.6.1" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#using-rvest-to-read-html"><i class="fa fa-check"></i><b>17.6.1</b> Using <code>RVest</code> to Read HTML</a></li>
<li class="chapter" data-level="17.6.2" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#find-page-elements"><i class="fa fa-check"></i><b>17.6.2</b> Find Page Elements</a></li>
<li class="chapter" data-level="17.6.3" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#get-attributes-and-text-of-elements"><i class="fa fa-check"></i><b>17.6.3</b> Get Attributes and Text of Elements</a></li>
<li class="chapter" data-level="17.6.4" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#lets-do-this."><i class="fa fa-check"></i><b>17.6.4</b> Let’s DO this.</a></li>
<li class="chapter" data-level="17.6.5" data-path="collecting-data-from-the-web.html"><a href="collecting-data-from-the-web.html#challenge-1-make-a-function"><i class="fa fa-check"></i><b>17.6.5</b> Challenge 1: Make a function</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Assignments and Projects</b></span></li>
<li class="chapter" data-level="18" data-path="assignments-1.html"><a href="assignments-1.html"><i class="fa fa-check"></i><b>18</b> Assignments</a><ul>
<li class="chapter" data-level="18.1" data-path="assignments-1.html"><a href="assignments-1.html#assignment-1-solutions"><i class="fa fa-check"></i><b>18.1</b> Assignment 1 Solutions</a></li>
<li class="chapter" data-level="18.2" data-path="assignments-1.html"><a href="assignments-1.html#assignment-2-solutions"><i class="fa fa-check"></i><b>18.2</b> Assignment 2 Solutions</a></li>
</ul></li>
<li class="part"><span><b>IV Resources</b></span></li>
<li class="chapter" data-level="19" data-path="cheat-sheets-and-guides.html"><a href="cheat-sheets-and-guides.html"><i class="fa fa-check"></i><b>19</b> Cheat Sheets and Guides</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PLSC 31101: Computational Tools for Social Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programming-in-r" class="section level1">
<h1><span class="header-section-number">Chapter 16</span> Programming in R</h1>
<p>This unit covers some more advanced programming in R - namely:</p>
<ol style="list-style-type: decimal">
<li><a href="programming-in-r.html#conditional-flow">Conditional Flow</a></li>
<li><a href="programming-in-r.html#functions-1">Functions</a></li>
<li><a href="programming-in-r.html#iteration">Iteration</a></li>
</ol>
<p>Mastering these skills will make you virtually invincible in R!</p>
<p>Note that these concepts are <strong>not specific to R</strong>. While the syntax might vary, the basic idea of flow, functions, and iteration are common across all scripting languages. So if you ever think of picking up Python or something else, it’s critical to familiarize yourself with these concepts.</p>
<div id="conditional-flow" class="section level2">
<h2><span class="header-section-number">16.1</span> Conditional Flow</h2>
<p>Sometimes you only want to execute code if a certain condition is met. To do that, we use an <strong>if-else statement.</strong> It looks like this:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" data-line-number="1"><span class="cf">if</span> (condition) {</a>
<a class="sourceLine" id="cb361-2" data-line-number="2">  <span class="co"># code executed when condition is TRUE</span></a>
<a class="sourceLine" id="cb361-3" data-line-number="3">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb361-4" data-line-number="4">  <span class="co"># code executed when condition is FALSE</span></a>
<a class="sourceLine" id="cb361-5" data-line-number="5">}</a></code></pre></div>
<p><code>condition</code> is a statement that must always evaluate to either <code>TRUE</code> or <code>FALSE</code>. This is similar to <code>filter()</code>, except <code>condition</code> can only be a single value (i.e. a vector of length 1), whereas <code>filter()</code> works for entire vectors (or columns).</p>
<p>Let’s look at a simple example:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb362-1" data-line-number="1">age =<span class="st"> </span><span class="dv">84</span></a>
<a class="sourceLine" id="cb362-2" data-line-number="2"><span class="cf">if</span> (age <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>) {</a>
<a class="sourceLine" id="cb362-3" data-line-number="3">    <span class="kw">print</span>(<span class="kw">paste</span>(age, <span class="st">&quot;is old&quot;</span>))</a>
<a class="sourceLine" id="cb362-4" data-line-number="4">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb362-5" data-line-number="5">    <span class="kw">print</span>(<span class="st">&quot;But you don&#39;t look like a professor!&quot;</span>)</a>
<a class="sourceLine" id="cb362-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb362-7" data-line-number="7"><span class="co">#&gt; [1] &quot;84 is old&quot;</span></a></code></pre></div>
<p>We refer to the first <code>print</code> command as the first <em>branch</em>.</p>
<p>Let’s change the <code>age</code> variable to execute the second branch:</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb363-1" data-line-number="1">age =<span class="st"> </span><span class="dv">20</span></a>
<a class="sourceLine" id="cb363-2" data-line-number="2"><span class="cf">if</span> (age <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>) {</a>
<a class="sourceLine" id="cb363-3" data-line-number="3">    <span class="kw">print</span>(<span class="kw">paste</span>(age, <span class="st">&quot;is old&quot;</span>))</a>
<a class="sourceLine" id="cb363-4" data-line-number="4">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb363-5" data-line-number="5">    <span class="kw">print</span>(<span class="st">&quot;But you don&#39;t look like a professor!&quot;</span>)</a>
<a class="sourceLine" id="cb363-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb363-7" data-line-number="7"><span class="co">#&gt; [1] &quot;But you don&#39;t look like a professor!&quot;</span></a></code></pre></div>
<div id="multiple-conditions" class="section level3">
<h3><span class="header-section-number">16.1.1</span> Multiple Conditions</h3>
<p>You can chain conditional statements together:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb364-1" data-line-number="1"><span class="cf">if</span> (this) {</a>
<a class="sourceLine" id="cb364-2" data-line-number="2">  <span class="co"># do that</span></a>
<a class="sourceLine" id="cb364-3" data-line-number="3">} <span class="cf">else</span> <span class="cf">if</span> (that) {</a>
<a class="sourceLine" id="cb364-4" data-line-number="4">  <span class="co"># do something else</span></a>
<a class="sourceLine" id="cb364-5" data-line-number="5">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb364-6" data-line-number="6">  <span class="co"># do something completely different</span></a>
<a class="sourceLine" id="cb364-7" data-line-number="7">}</a></code></pre></div>
</div>
<div id="complex-statements" class="section level3">
<h3><span class="header-section-number">16.1.2</span> Complex Statements</h3>
<p>We can generate more complex conditional statements with boolean operators like <code>&amp;</code> and <code>|</code>:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb365-1" data-line-number="1">age =<span class="st"> </span><span class="dv">45</span> </a>
<a class="sourceLine" id="cb365-2" data-line-number="2"></a>
<a class="sourceLine" id="cb365-3" data-line-number="3"><span class="cf">if</span> (age <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>) {</a>
<a class="sourceLine" id="cb365-4" data-line-number="4">    <span class="kw">print</span>(<span class="kw">paste</span>(age, <span class="st">&quot;is old&quot;</span>))</a>
<a class="sourceLine" id="cb365-5" data-line-number="5">} <span class="cf">else</span> <span class="cf">if</span> (age <span class="op">&lt;</span><span class="st"> </span><span class="dv">60</span> <span class="op">&amp;</span><span class="st"> </span>age <span class="op">&gt;</span><span class="st"> </span><span class="dv">40</span>) {</a>
<a class="sourceLine" id="cb365-6" data-line-number="6">    <span class="kw">print</span>(<span class="st">&quot;How&#39;s the midlife crisis?&quot;</span>)</a>
<a class="sourceLine" id="cb365-7" data-line-number="7">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb365-8" data-line-number="8">    <span class="kw">print</span>(<span class="st">&quot;But you don&#39;t look like a professor!&quot;</span>)</a>
<a class="sourceLine" id="cb365-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb365-10" data-line-number="10"><span class="co">#&gt; [1] &quot;How&#39;s the midlife crisis?&quot;</span></a></code></pre></div>
</div>
<div id="code-style" class="section level3">
<h3><span class="header-section-number">16.1.3</span> Code Style</h3>
<p>Both <code>if</code> and <code>function</code> should (almost) always be followed by squiggly brackets (<code>{}</code>), and the contents should be indented. This makes it easier to see the hierarchy in your code by skimming the left-hand margin.</p>
<p>An opening curly brace should never go on its own line and should always be followed by a new line. A closing curly brace should always go on its own line, unless it’s followed by else. Always indent the code inside curly braces.</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb366-1" data-line-number="1"><span class="co"># Bad</span></a>
<a class="sourceLine" id="cb366-2" data-line-number="2"><span class="cf">if</span> (y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>debug)</a>
<a class="sourceLine" id="cb366-3" data-line-number="3"><span class="kw">message</span>(<span class="st">&quot;Y is negative&quot;</span>)</a>
<a class="sourceLine" id="cb366-4" data-line-number="4"></a>
<a class="sourceLine" id="cb366-5" data-line-number="5"><span class="cf">if</span> (y <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb366-6" data-line-number="6">  <span class="kw">log</span>(x)</a>
<a class="sourceLine" id="cb366-7" data-line-number="7">} </a>
<a class="sourceLine" id="cb366-8" data-line-number="8"><span class="cf">else</span> {</a>
<a class="sourceLine" id="cb366-9" data-line-number="9">  y <span class="op">^</span><span class="st"> </span>x</a>
<a class="sourceLine" id="cb366-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb366-11" data-line-number="11"></a>
<a class="sourceLine" id="cb366-12" data-line-number="12"><span class="co"># Good</span></a>
<a class="sourceLine" id="cb366-13" data-line-number="13"><span class="cf">if</span> (y <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span>debug) {</a>
<a class="sourceLine" id="cb366-14" data-line-number="14">  <span class="kw">message</span>(<span class="st">&quot;Y is negative&quot;</span>)</a>
<a class="sourceLine" id="cb366-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb366-16" data-line-number="16"></a>
<a class="sourceLine" id="cb366-17" data-line-number="17"><span class="cf">if</span> (y <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb366-18" data-line-number="18">  <span class="kw">log</span>(x)</a>
<a class="sourceLine" id="cb366-19" data-line-number="19">} <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb366-20" data-line-number="20">  y <span class="op">^</span><span class="st"> </span>x</a>
<a class="sourceLine" id="cb366-21" data-line-number="21">}</a></code></pre></div>
</div>
<div id="if-vs.-if_else" class="section level3">
<h3><span class="header-section-number">16.1.4</span> <code>if</code> vs. <code>if_else</code></h3>
<p>Because if-else conditional statements like the ones outlined above must always resolve to a single <code>TRUE</code> or <code>FALSE</code>, they cannot be used for vector operations. Vector operations are where you make multiple comparisons simultaneously for each value stored inside a vector.</p>
<p>Consider the <code>gapminder</code> data and imagine you wanted to create a new column identifying whether or not a country-year observation has a life expectancy of at least 35.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb367-1" data-line-number="1">gap &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;Data/gapminder-FiveYearData.csv&quot;</span>)</a>
<a class="sourceLine" id="cb367-2" data-line-number="2"><span class="kw">head</span>(gap)</a>
<a class="sourceLine" id="cb367-3" data-line-number="3"><span class="co">#&gt;       country year      pop continent lifeExp gdpPercap</span></a>
<a class="sourceLine" id="cb367-4" data-line-number="4"><span class="co">#&gt; 1 Afghanistan 1952  8425333      Asia    28.8       779</span></a>
<a class="sourceLine" id="cb367-5" data-line-number="5"><span class="co">#&gt; 2 Afghanistan 1957  9240934      Asia    30.3       821</span></a>
<a class="sourceLine" id="cb367-6" data-line-number="6"><span class="co">#&gt; 3 Afghanistan 1962 10267083      Asia    32.0       853</span></a>
<a class="sourceLine" id="cb367-7" data-line-number="7"><span class="co">#&gt; 4 Afghanistan 1967 11537966      Asia    34.0       836</span></a>
<a class="sourceLine" id="cb367-8" data-line-number="8"><span class="co">#&gt; 5 Afghanistan 1972 13079460      Asia    36.1       740</span></a>
<a class="sourceLine" id="cb367-9" data-line-number="9"><span class="co">#&gt; 6 Afghanistan 1977 14880372      Asia    38.4       786</span></a></code></pre></div>
<p>This sounds like a classic if-else operation. For each observation, if <code>lifeExp</code> is greater than or equal to <code>35</code>, then the value in the new column should be <code>1</code>. Otherwise, it should be <code>0</code>. But what happens if we try to implement this using an if-else operation like above?</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb368-1" data-line-number="1">gap_if &lt;-<span class="st"> </span>gap <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb368-2" data-line-number="2"><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">life.35 =</span> <span class="cf">if</span>(lifeExp <span class="op">&gt;=</span><span class="st"> </span><span class="dv">35</span>){</a>
<a class="sourceLine" id="cb368-3" data-line-number="3">     <span class="dv">1</span></a>
<a class="sourceLine" id="cb368-4" data-line-number="4">   } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb368-5" data-line-number="5">     <span class="dv">0</span></a>
<a class="sourceLine" id="cb368-6" data-line-number="6">   })</a>
<a class="sourceLine" id="cb368-7" data-line-number="7"><span class="co">#&gt; Warning in if (lifeExp &gt;= 35) {: the condition has length &gt; 1 and only the</span></a>
<a class="sourceLine" id="cb368-8" data-line-number="8"><span class="co">#&gt; first element will be used</span></a>
<a class="sourceLine" id="cb368-9" data-line-number="9"></a>
<a class="sourceLine" id="cb368-10" data-line-number="10"><span class="kw">head</span>(gap_if)</a>
<a class="sourceLine" id="cb368-11" data-line-number="11"><span class="co">#&gt;       country year      pop continent lifeExp gdpPercap life.35</span></a>
<a class="sourceLine" id="cb368-12" data-line-number="12"><span class="co">#&gt; 1 Afghanistan 1952  8425333      Asia    28.8       779       0</span></a>
<a class="sourceLine" id="cb368-13" data-line-number="13"><span class="co">#&gt; 2 Afghanistan 1957  9240934      Asia    30.3       821       0</span></a>
<a class="sourceLine" id="cb368-14" data-line-number="14"><span class="co">#&gt; 3 Afghanistan 1962 10267083      Asia    32.0       853       0</span></a>
<a class="sourceLine" id="cb368-15" data-line-number="15"><span class="co">#&gt; 4 Afghanistan 1967 11537966      Asia    34.0       836       0</span></a>
<a class="sourceLine" id="cb368-16" data-line-number="16"><span class="co">#&gt; 5 Afghanistan 1972 13079460      Asia    36.1       740       0</span></a>
<a class="sourceLine" id="cb368-17" data-line-number="17"><span class="co">#&gt; 6 Afghanistan 1977 14880372      Asia    38.4       786       0</span></a></code></pre></div>
<p>This did not work correctly. Because <code>if()</code> can only handle a single <code>TRUE/FALSE</code> value, it only checked the first row of the data frame. That row contained <code>28.801</code>, so it generated a vector of length 1704 with each value being <code>0</code>.</p>
<p>Because we in fact want to make this if-else comparison 1704 times, we should instead use <strong><code>if_else()</code></strong>. This <strong>vectorizes</strong> the if-else comparison and makes a separate comparison for each row of the data frame. This allows us to correctly generate this new column.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb369-1" data-line-number="1">gap_ifelse &lt;-<span class="st"> </span>gap <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb369-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">life.35 =</span> <span class="kw">if_else</span>(lifeExp <span class="op">&gt;=</span><span class="st"> </span><span class="dv">35</span>, <span class="dv">1</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb369-3" data-line-number="3"></a>
<a class="sourceLine" id="cb369-4" data-line-number="4"><span class="kw">head</span>(gap_ifelse)</a>
<a class="sourceLine" id="cb369-5" data-line-number="5"><span class="co">#&gt;       country year      pop continent lifeExp gdpPercap life.35</span></a>
<a class="sourceLine" id="cb369-6" data-line-number="6"><span class="co">#&gt; 1 Afghanistan 1952  8425333      Asia    28.8       779       0</span></a>
<a class="sourceLine" id="cb369-7" data-line-number="7"><span class="co">#&gt; 2 Afghanistan 1957  9240934      Asia    30.3       821       0</span></a>
<a class="sourceLine" id="cb369-8" data-line-number="8"><span class="co">#&gt; 3 Afghanistan 1962 10267083      Asia    32.0       853       0</span></a>
<a class="sourceLine" id="cb369-9" data-line-number="9"><span class="co">#&gt; 4 Afghanistan 1967 11537966      Asia    34.0       836       0</span></a>
<a class="sourceLine" id="cb369-10" data-line-number="10"><span class="co">#&gt; 5 Afghanistan 1972 13079460      Asia    36.1       740       1</span></a>
<a class="sourceLine" id="cb369-11" data-line-number="11"><span class="co">#&gt; 6 Afghanistan 1977 14880372      Asia    38.4       786       1</span></a></code></pre></div>

</div>
</div>
<div id="functions-1" class="section level2">
<h2><span class="header-section-number">16.2</span> Functions</h2>
<p>Functions are the basic building blocks of programs. Think of them as “mini-scripts” or “tiny commands.” We’ve already used dozens of functions created by others (e.g. <code>filter()</code>, <code>mean()</code>.)</p>
<p>This lesson teaches you how to write you own functions, and why you would want to do so. The details are pretty simple, but this is one of those ideas where it’s good to get lots of practice!</p>
<div id="why-write-functions" class="section level3">
<h3><span class="header-section-number">16.2.1</span> Why Write Functions?</h3>
<p>Functions allow you to automate common tasks in a more powerful and general way than copy-and-pasting. For example, take a look at the following code:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb370-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb370-2" data-line-number="2">  <span class="dt">a =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb370-3" data-line-number="3">  <span class="dt">b =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb370-4" data-line-number="4">  <span class="dt">c =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb370-5" data-line-number="5">  <span class="dt">d =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb370-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb370-7" data-line-number="7"></a>
<a class="sourceLine" id="cb370-8" data-line-number="8">df<span class="op">$</span>a &lt;-<span class="st"> </span>(df<span class="op">$</span>a <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(df<span class="op">$</span>a)) <span class="op">/</span><span class="st"> </span>(<span class="kw">max</span>(df<span class="op">$</span>a) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(df<span class="op">$</span>a))</a>
<a class="sourceLine" id="cb370-9" data-line-number="9">df<span class="op">$</span>b &lt;-<span class="st"> </span>(df<span class="op">$</span>b <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(df<span class="op">$</span>b)) <span class="op">/</span><span class="st"> </span>(<span class="kw">max</span>(df<span class="op">$</span>b) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(df<span class="op">$</span>a))</a>
<a class="sourceLine" id="cb370-10" data-line-number="10">df<span class="op">$</span>c &lt;-<span class="st"> </span>(df<span class="op">$</span>c <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(df<span class="op">$</span>c)) <span class="op">/</span><span class="st"> </span>(<span class="kw">max</span>(df<span class="op">$</span>c) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(df<span class="op">$</span>c))</a>
<a class="sourceLine" id="cb370-11" data-line-number="11">df<span class="op">$</span>d &lt;-<span class="st"> </span>(df<span class="op">$</span>d <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(df<span class="op">$</span>d)) <span class="op">/</span><span class="st"> </span>(<span class="kw">max</span>(df<span class="op">$</span>d) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(df<span class="op">$</span>d))</a></code></pre></div>
<p>You might be able to puzzle out that this rescales each column to have a range from 0 to 1. But did you spot the mistake? I made an error when copying-and-pasting the code for <code>df$b</code>: I forgot to change an <code>a</code> to a <code>b</code>.</p>
<p>Functions have a number of advantages over this “copy-and-paste” approach:</p>
<ul>
<li><p><strong>They are easy to reuse.</strong> If you need to change things, you only have to update code in one place, instead of many.</p></li>
<li><p><strong>They are self-documenting.</strong> Functions name pieces of code the way variables name strings and numbers. Give your function a good name and you will easily remember the function and its purpose.</p></li>
<li><p><strong>They are easier to debug.</strong> There are fewer chances to make mistakes because the code only exists in one location (i.e. updating a variable name in one place, but not in another).</p></li>
</ul>
</div>
<div id="anatomy-of-a-function" class="section level3">
<h3><span class="header-section-number">16.2.2</span> Anatomy of a Function</h3>
<p>Functions have three key components:</p>
<ol style="list-style-type: decimal">
<li>A <strong>name</strong>. This should be informative and describe what the function does.</li>
<li>The <strong>arguments</strong>, or list of inputs, to the function. They go inside the parentheses in <code>function()</code>.</li>
<li>The <strong>body</strong>. This is the block of code within <code>{}</code> that immediately follows <code>function(...)</code>, and is the code that you develop to perform the action described in the name using the arguments you provide.</li>
</ol>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb371-1" data-line-number="1">my_function &lt;-<span class="st"> </span><span class="cf">function</span>(x, y){</a>
<a class="sourceLine" id="cb371-2" data-line-number="2">  <span class="co"># do</span></a>
<a class="sourceLine" id="cb371-3" data-line-number="3">  <span class="co"># something</span></a>
<a class="sourceLine" id="cb371-4" data-line-number="4">  <span class="co"># here</span></a>
<a class="sourceLine" id="cb371-5" data-line-number="5">  <span class="kw">return</span>(result)</a>
<a class="sourceLine" id="cb371-6" data-line-number="6">}</a></code></pre></div>
<p>In this example, <code>my_function</code> is the <strong>name</strong> of the function, <code>x</code> and <code>y</code> are the <strong>arguments</strong>, and the stuff inside the <code>{}</code> is the <strong>body</strong>.</p>
</div>
<div id="writing-a-function" class="section level3">
<h3><span class="header-section-number">16.2.3</span> Writing a Function</h3>
<p>Let’s re-write the scaling code above as a function. To write a function you need to first analyze the code. How many inputs does it have?</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb372-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb372-2" data-line-number="2">  <span class="dt">a =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb372-3" data-line-number="3">  <span class="dt">b =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb372-4" data-line-number="4">  <span class="dt">c =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb372-5" data-line-number="5">  <span class="dt">d =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb372-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb372-7" data-line-number="7"></a>
<a class="sourceLine" id="cb372-8" data-line-number="8">(df<span class="op">$</span>a <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(df<span class="op">$</span>a)) <span class="op">/</span><span class="st"> </span>(<span class="kw">max</span>(df<span class="op">$</span>a) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(df<span class="op">$</span>a))</a>
<a class="sourceLine" id="cb372-9" data-line-number="9"><span class="co">#&gt;  [1] 0.289 0.751 0.000 0.678 0.853 1.000 0.172 0.611 0.612 0.601</span></a></code></pre></div>
<p>This code only has one input: <code>df$a</code>. To make the inputs more clear, it’s a good idea to rewrite the code using temporary variables with general names. Here this code only requires a single numeric vector, which I’ll call <code>x</code>:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" data-line-number="1">x &lt;-<span class="st"> </span>df<span class="op">$</span>a</a>
<a class="sourceLine" id="cb373-2" data-line-number="2">(x <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(x)) <span class="op">/</span><span class="st"> </span>(<span class="kw">max</span>(x) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(x))</a>
<a class="sourceLine" id="cb373-3" data-line-number="3"><span class="co">#&gt;  [1] 0.289 0.751 0.000 0.678 0.853 1.000 0.172 0.611 0.612 0.601</span></a></code></pre></div>
<p>There is some duplication in this code. We’re computing the range of the data three times, so it makes sense to do it in one step:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb374-1" data-line-number="1">rng &lt;-<span class="st"> </span><span class="kw">range</span>(x)</a>
<a class="sourceLine" id="cb374-2" data-line-number="2">rng</a>
<a class="sourceLine" id="cb374-3" data-line-number="3"><span class="co">#&gt; [1] -2.44  1.15</span></a>
<a class="sourceLine" id="cb374-4" data-line-number="4"></a>
<a class="sourceLine" id="cb374-5" data-line-number="5">(x <span class="op">-</span><span class="st"> </span>rng[<span class="dv">1</span>]) <span class="op">/</span><span class="st"> </span>(rng[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>rng[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb374-6" data-line-number="6"><span class="co">#&gt;  [1] 0.289 0.751 0.000 0.678 0.853 1.000 0.172 0.611 0.612 0.601</span></a></code></pre></div>
<p>Pulling out intermediate calculations into named variables is a good practice because it becomes more clear what the code is doing. Now that I’ve simplified the code, and checked that it still works, I can turn it into a function:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb375-1" data-line-number="1">rescale01 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb375-2" data-line-number="2">  rng &lt;-<span class="st"> </span><span class="kw">range</span>(x)</a>
<a class="sourceLine" id="cb375-3" data-line-number="3">  scaled &lt;-<span class="st"> </span>(x <span class="op">-</span><span class="st"> </span>rng[<span class="dv">1</span>]) <span class="op">/</span><span class="st"> </span>(rng[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>rng[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb375-4" data-line-number="4">  <span class="kw">return</span>(scaled)</a>
<a class="sourceLine" id="cb375-5" data-line-number="5">}</a></code></pre></div>
<p>Note the overall process: I only made the function after I’d figured out how to make it work with a simple input. It’s easier to start with working code and turn it into a function; it’s harder to create a function and then try to make it work.</p>
<p>At this point it’s a good idea to check your function with a few different inputs:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb376-1" data-line-number="1"><span class="kw">rescale01</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb376-2" data-line-number="2"><span class="co">#&gt; [1] 0.0 0.5 1.0</span></a>
<a class="sourceLine" id="cb376-3" data-line-number="3"></a>
<a class="sourceLine" id="cb376-4" data-line-number="4"><span class="kw">rescale01</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb376-5" data-line-number="5"><span class="co">#&gt; [1] 0.00 0.25 0.50 1.00</span></a></code></pre></div>
</div>
<div id="using-a-function" class="section level3">
<h3><span class="header-section-number">16.2.4</span> Using a Function</h3>
<p>Two important points about using (or *calling**) functions:</p>
<ol style="list-style-type: decimal">
<li><p>Notice that when we <strong>call</strong> a function, we’re passing a value into it that is assigned to the parameter we defined when writing the function. In this case, the parameter <code>x</code> is automatically assigned to <code>c(-10, 0, 10)</code>.</p></li>
<li><p>When using functions, by default the returned object is merely printed to the screen. If you want it saved, you need to assign it to an object.</p></li>
</ol>
<p>Let’s see if we can simplify the original example with our brand new function:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb377-1" data-line-number="1">df<span class="op">$</span>a &lt;-<span class="st"> </span><span class="kw">rescale01</span>(df<span class="op">$</span>a)</a>
<a class="sourceLine" id="cb377-2" data-line-number="2">df<span class="op">$</span>b &lt;-<span class="st"> </span><span class="kw">rescale01</span>(df<span class="op">$</span>b)</a>
<a class="sourceLine" id="cb377-3" data-line-number="3">df<span class="op">$</span>c &lt;-<span class="st"> </span><span class="kw">rescale01</span>(df<span class="op">$</span>c)</a>
<a class="sourceLine" id="cb377-4" data-line-number="4">df<span class="op">$</span>d &lt;-<span class="st"> </span><span class="kw">rescale01</span>(df<span class="op">$</span>d)</a></code></pre></div>
<p>Compared to the original, this code is easier to understand and we’ve eliminated one class of copy-and-paste errors. There is still quite a bit of duplication since we’re doing the same thing to multiple columns. We’ll learn how to eliminate that duplication in the lesson on iteration.</p>
<p>Another advantage of functions is that if our requirements change, we only need to make the change in one place. For example, we might discover that some of our variables include <code>NA</code> values, and <code>rescale01()</code> fails:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb378-1" data-line-number="1"><span class="kw">rescale01</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb378-2" data-line-number="2"><span class="co">#&gt; [1] NA NA NA NA NA NA</span></a></code></pre></div>
<p>Because we’ve extracted the code into a function, we only need to make the fix in one place:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb379-1" data-line-number="1">rescale01 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb379-2" data-line-number="2">  rng &lt;-<span class="st"> </span><span class="kw">range</span>(x, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb379-3" data-line-number="3">  (x <span class="op">-</span><span class="st"> </span>rng[<span class="dv">1</span>]) <span class="op">/</span><span class="st"> </span>(rng[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>rng[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb379-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb379-5" data-line-number="5"><span class="kw">rescale01</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb379-6" data-line-number="6"><span class="co">#&gt; [1] 0.00 0.25   NA 0.50 0.75 1.00</span></a></code></pre></div>
</div>
<div id="variable-scope" class="section level3">
<h3><span class="header-section-number">16.2.5</span> Variable Scope</h3>
<p>Analyze the following function:</p>
<ol style="list-style-type: decimal">
<li>Identify the name, arguments, and body</li>
<li>What does it do?</li>
<li>If <code>a = 3</code> and <code>b = 4</code>, what should we expect the output to be?</li>
</ol>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb380-1" data-line-number="1">pythagorean &lt;-<span class="st"> </span><span class="cf">function</span>(a, b){</a>
<a class="sourceLine" id="cb380-2" data-line-number="2">  hypotenuse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(a<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>b<span class="op">^</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb380-3" data-line-number="3">  <span class="kw">return</span>(hypotenuse)</a>
<a class="sourceLine" id="cb380-4" data-line-number="4">}</a></code></pre></div>
<p>Now take a look at the following code:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb381-1" data-line-number="1"><span class="kw">pythagorean</span>(<span class="dt">a =</span> <span class="dv">3</span>, <span class="dt">b =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb381-2" data-line-number="2"><span class="co">#&gt; [1] 5</span></a>
<a class="sourceLine" id="cb381-3" data-line-number="3"></a>
<a class="sourceLine" id="cb381-4" data-line-number="4">hypotenuse</a>
<a class="sourceLine" id="cb381-5" data-line-number="5"><span class="co">#&gt; Error in eval(expr, envir, enclos): object &#39;hypotenuse&#39; not found</span></a></code></pre></div>
<p>Why does this generate an error? Why can we not see the results of <code>hypotenuse</code>? After all, it was generated by <code>pythagorean</code>, right?</p>
<p>When you call a function, a temporary workspace is set up that will be destroyed when the function returns, either by:</p>
<ol style="list-style-type: decimal">
<li>getting to the end, or</li>
<li>an explicit return statement</li>
</ol>
<p>So think of functions as an alternative reality, where objects are created and destroyed in a function call.</p>
<p>This is why you do not see hypotenuse listed in the environment - it has already been destroyed.</p>
<div id="global-vs.local-environments" class="section level4 unnumbered">
<h4>Global vs. Local Environments</h4>
<p>Things can get confusing when you use the same names for variables both inside and outside a function. Check out this example:</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb382-1" data-line-number="1">pressure =<span class="st"> </span><span class="fl">103.9</span></a>
<a class="sourceLine" id="cb382-2" data-line-number="2">adjust &lt;-<span class="st"> </span><span class="cf">function</span>(t){</a>
<a class="sourceLine" id="cb382-3" data-line-number="3">    temperature =<span class="st"> </span>t <span class="op">*</span><span class="st"> </span><span class="fl">1.43</span> <span class="op">/</span><span class="st"> </span>pressure</a>
<a class="sourceLine" id="cb382-4" data-line-number="4">    <span class="kw">return</span>(temperature)</a>
<a class="sourceLine" id="cb382-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb382-6" data-line-number="6">pressure</a>
<a class="sourceLine" id="cb382-7" data-line-number="7"><span class="co">#&gt; [1] 104</span></a>
<a class="sourceLine" id="cb382-8" data-line-number="8">temperature</a>
<a class="sourceLine" id="cb382-9" data-line-number="9"><span class="co">#&gt; Error in eval(expr, envir, enclos): object &#39;temperature&#39; not found</span></a></code></pre></div>
<p><code>t</code> and <code>temperature</code> are <strong>local</strong> variables in <code>adjust</code>. Local variables are:</p>
<ul>
<li>Defined in the function.</li>
<li>Not visible in the main program.</li>
<li>Remember: a function parameter is a variable that is automatically assigned a value when the function is called.</li>
</ul>
<p><code>pressure</code> is a <strong>global</strong> variable. Global variables are:</p>
<ul>
<li>Defined outside any particular function.</li>
<li>Visible everywhere.</li>
</ul>
<p>This difference is referred to as <strong>scope</strong>. The <strong>scope</strong> of a variable is the part of a program that can ‘see’ that variable.</p>
</div>
</div>
<div id="arguments-1" class="section level3">
<h3><span class="header-section-number">16.2.6</span> Arguments</h3>
<p>Functions do not need to take input.</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" data-line-number="1">print_hello &lt;-<span class="st"> </span><span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb383-2" data-line-number="2">    <span class="kw">print</span>(<span class="st">&quot;hello&quot;</span>)</a>
<a class="sourceLine" id="cb383-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb383-4" data-line-number="4"><span class="kw">print_hello</span>()</a>
<a class="sourceLine" id="cb383-5" data-line-number="5"><span class="co">#&gt; [1] &quot;hello&quot;</span></a></code></pre></div>
<p>But if a function takes input, arguments can be passed to functions in different ways.</p>
<ol style="list-style-type: decimal">
<li><strong>Positional arguments</strong> are mandatory and have no default values.</li>
</ol>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb384-1" data-line-number="1">send &lt;-<span class="st"> </span><span class="cf">function</span>(message, recipient){</a>
<a class="sourceLine" id="cb384-2" data-line-number="2">  message &lt;-<span class="st"> </span><span class="kw">paste</span>(message, recipient)</a>
<a class="sourceLine" id="cb384-3" data-line-number="3">  <span class="kw">return</span>(message)</a>
<a class="sourceLine" id="cb384-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb384-5" data-line-number="5"><span class="kw">send</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;world&quot;</span>)</a>
<a class="sourceLine" id="cb384-6" data-line-number="6"><span class="co">#&gt; [1] &quot;Hello world&quot;</span></a></code></pre></div>
<p>In the case above, it is possible to use argument <strong>names</strong> when calling the functions and, by doing so, it is possible to switch the order of arguments. For instance:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" data-line-number="1"><span class="kw">send</span>(<span class="dt">recipient=</span><span class="st">&#39;World&#39;</span>, <span class="dt">message=</span><span class="st">&#39;Hello&#39;</span>)</a>
<a class="sourceLine" id="cb385-2" data-line-number="2"><span class="co">#&gt; [1] &quot;Hello World&quot;</span></a></code></pre></div>
<p>However, positional arguments (<code>send('Hello', 'World')</code>) are greatly perfered over names (<code>send(recipient='World', message='Hello')</code>), as it is very easy to accidentally specifying incorrect argument values.</p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Keyword arguments</strong> are not mandatory and have default values. They are often used for optional parameters sent to the function.</li>
</ol>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb386-1" data-line-number="1">send &lt;-<span class="st"> </span><span class="cf">function</span>(message, recipient, <span class="dt">cc=</span><span class="ot">NULL</span>){</a>
<a class="sourceLine" id="cb386-2" data-line-number="2">  message &lt;-<span class="st"> </span><span class="kw">paste</span>(message, recipient, <span class="st">&quot;cc:&quot;</span>, cc)</a>
<a class="sourceLine" id="cb386-3" data-line-number="3">  <span class="kw">return</span>(message)</a>
<a class="sourceLine" id="cb386-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb386-5" data-line-number="5"><span class="kw">send</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;world&quot;</span>) </a>
<a class="sourceLine" id="cb386-6" data-line-number="6"><span class="co">#&gt; [1] &quot;Hello world cc: &quot;</span></a>
<a class="sourceLine" id="cb386-7" data-line-number="7"><span class="kw">send</span>(<span class="st">&quot;Hello&quot;</span>, <span class="st">&quot;world&quot;</span>, <span class="st">&quot;rochelle&quot;</span>)</a>
<a class="sourceLine" id="cb386-8" data-line-number="8"><span class="co">#&gt; [1] &quot;Hello world cc: rochelle&quot;</span></a></code></pre></div>
<p>Here <code>cc</code> and bcc are <code>optional</code>, and evaluate to <code>NULL</code> when they are not passed another value.</p>
</div>
<div id="challenges-21" class="section level3">
<h3><span class="header-section-number">16.2.7</span> Challenges</h3>
<div id="challenge-1-1" class="section level4 unnumbered">
<h4>Challenge 1</h4>
<p>Write a function that calculates the sum of the squared value of two numbers. For instance, it should generate the following output:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" data-line-number="1"><span class="kw">my_function</span>(<span class="dv">3</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb387-2" data-line-number="2"><span class="co"># [1] 25</span></a></code></pre></div>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb388-1" data-line-number="1">my_function &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</a>
<a class="sourceLine" id="cb388-2" data-line-number="2">  sum &lt;-<span class="st"> </span>a<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>b<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb388-3" data-line-number="3">  <span class="kw">return</span>(sum)</a>
<a class="sourceLine" id="cb388-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb388-5" data-line-number="5"></a>
<a class="sourceLine" id="cb388-6" data-line-number="6"><span class="kw">my_function</span>(<span class="dv">3</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb388-7" data-line-number="7"><span class="co">#&gt; [1] 25</span></a></code></pre></div>
</div>
<div id="challenge-2-1" class="section level4 unnumbered">
<h4>Challenge 2</h4>
<p>Write <code>both_na()</code>, a function that takes two vectors of the same length and returns the number of positions that have an NA in both vectors.</p>
</div>
<div id="challenge-3" class="section level4 unnumbered">
<h4>Challenge 3</h4>
<p>Fill in the blanks to create a function that takes a name like “Rochelle Terman” and returns that name in uppercase and reversed, like “TERMAN, ROCHELLE”</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb389-1" data-line-number="1">standard_names &lt;-<span class="st"> </span><span class="cf">function</span>(name){</a>
<a class="sourceLine" id="cb389-2" data-line-number="2">    upper_case =<span class="st"> </span><span class="kw">toupper</span>(____) <span class="co"># make upper</span></a>
<a class="sourceLine" id="cb389-3" data-line-number="3">    upper_case_vec =<span class="st"> </span><span class="kw">strsplit</span>(_____, <span class="dt">split =</span> <span class="st">&#39; &#39;</span>)[[<span class="dv">1</span>]] <span class="co"># turn into a vector</span></a>
<a class="sourceLine" id="cb389-4" data-line-number="4">    first_name =<span class="st"> </span>______ <span class="co"># take first name</span></a>
<a class="sourceLine" id="cb389-5" data-line-number="5">    last_name =<span class="st"> </span>_______ <span class="co"># take last name</span></a>
<a class="sourceLine" id="cb389-6" data-line-number="6">    reversed_name =<span class="st"> </span><span class="kw">paste</span>(______, _______, <span class="dt">sep =</span> <span class="st">&quot;, &quot;</span>) <span class="co"># reverse and separate by a comma and space</span></a>
<a class="sourceLine" id="cb389-7" data-line-number="7">    <span class="kw">return</span>(reversed_name)</a>
<a class="sourceLine" id="cb389-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb389-9" data-line-number="9"></a>
<a class="sourceLine" id="cb389-10" data-line-number="10"><span class="co">#Solution -- HIDE ME</span></a>
<a class="sourceLine" id="cb389-11" data-line-number="11">standard_names &lt;-<span class="st"> </span><span class="cf">function</span>(name){</a>
<a class="sourceLine" id="cb389-12" data-line-number="12">    upper_case =<span class="st"> </span><span class="kw">toupper</span>(name) <span class="co"># make upper</span></a>
<a class="sourceLine" id="cb389-13" data-line-number="13">    upper_case_vec =<span class="st"> </span><span class="kw">strsplit</span>(upper_case, <span class="dt">split =</span> <span class="st">&#39; &#39;</span>)[[<span class="dv">1</span>]]  <span class="co"># turn into a list</span></a>
<a class="sourceLine" id="cb389-14" data-line-number="14">    first_name =<span class="st"> </span>upper_case_vec[<span class="dv">1</span>]<span class="co"># take first name</span></a>
<a class="sourceLine" id="cb389-15" data-line-number="15">    last_name =<span class="st"> </span>upper_case_vec[<span class="dv">2</span>] <span class="co"># take last name</span></a>
<a class="sourceLine" id="cb389-16" data-line-number="16">    reversed_name =<span class="st"> </span><span class="kw">paste</span>(last_name, first_name, <span class="dt">sep =</span> <span class="st">&quot;, &quot;</span>) <span class="co"># reverse and separate by a comma and space</span></a>
<a class="sourceLine" id="cb389-17" data-line-number="17">    <span class="kw">return</span>(reversed_name)</a>
<a class="sourceLine" id="cb389-18" data-line-number="18">}</a>
<a class="sourceLine" id="cb389-19" data-line-number="19"><span class="kw">standard_names</span>(<span class="st">&#39;Rochelle Terman&#39;</span>)</a></code></pre></div>
</div>
<div id="challenge-4" class="section level4 unnumbered">
<h4>Challenge 4</h4>
<p>Look at the following function:</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb390-1" data-line-number="1">print_date &lt;-<span class="st"> </span><span class="cf">function</span>(year, month, day){</a>
<a class="sourceLine" id="cb390-2" data-line-number="2">    joined =<span class="st"> </span><span class="kw">paste</span>(<span class="kw">as.character</span>(year), <span class="kw">as.character</span>(month), <span class="kw">as.character</span>(day), <span class="dt">sep =</span> <span class="st">&quot;/&quot;</span>)</a>
<a class="sourceLine" id="cb390-3" data-line-number="3">    <span class="kw">return</span>(joined)</a>
<a class="sourceLine" id="cb390-4" data-line-number="4">}</a></code></pre></div>
<p>What does this short program print?</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb391-1" data-line-number="1"><span class="kw">print_date</span>(<span class="dt">day=</span><span class="dv">1</span>, <span class="dt">month=</span><span class="dv">2</span>, <span class="dt">year=</span><span class="dv">2003</span>)</a></code></pre></div>
</div>
<div id="acknowledgements-and-resources" class="section level4 unnumbered">
<h4>Acknowledgements and Resources</h4>
<ul>
<li><a href="https://r4ds.had.co.nz/functions.html">R for Data Science</a>.</li>
<li><a href="https://cfss.uchicago.edu/notes/functions">Computing for Social Sciences</a></li>
</ul>

</div>
</div>
</div>
<div id="iteration" class="section level2">
<h2><span class="header-section-number">16.3</span> Iteration</h2>
<p>In the last unit, we talked about how important it is to reduce duplication in your code by creating functions instead of copying-and-pasting. Avoiding duplication allows for more readable, more flexible, and less error-prone code.</p>
<p>Functions are one method of reducing duplication in your code. Another tool for reducing duplication is <strong>iteration</strong>, which lets you do the same task to multiple inputs.</p>
<p>In this chapter you’ll learn about four approaches to iteratation:</p>
<ol style="list-style-type: decimal">
<li>Vectorized functions</li>
<li>For-loops</li>
<li><code>map</code> and functional programming</li>
<li>Scoped verbs in <code>dplyr</code></li>
</ol>
<div id="vectorized-functions" class="section level3">
<h3><span class="header-section-number">16.3.1</span> Vectorized Functions</h3>
<p>Most of R’s built-in functions are <strong>vectorized</strong>, meaning that the function will operate on all elements of a vector without needing to loop through and act on each element at a time.</p>
<p>That means you should never need to perform explicit iteration when performing simple mathematical computations.</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb392-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb392-2" data-line-number="2">x <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb392-3" data-line-number="3"><span class="co">#&gt; [1] 2 4 6 8</span></a></code></pre></div>
<p>Notice that the multiplication happened to each element of the vector. Most built-in functions also operate element-wise on vectors:</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb393-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb393-2" data-line-number="2"><span class="kw">log</span>(x)</a>
<a class="sourceLine" id="cb393-3" data-line-number="3"><span class="co">#&gt; [1] 0.000 0.693 1.099 1.386</span></a></code></pre></div>
<p>We can also add two vectors together:</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb394-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb394-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="dv">6</span><span class="op">:</span><span class="dv">9</span></a>
<a class="sourceLine" id="cb394-3" data-line-number="3">x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb394-4" data-line-number="4"><span class="co">#&gt; [1]  7  9 11 13</span></a></code></pre></div>
<p>Notice that each element of x was added to its corresponding element of y:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb395-1" data-line-number="1">x<span class="op">:</span><span class="st">  </span><span class="dv">1</span>  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">4</span></a>
<a class="sourceLine" id="cb395-2" data-line-number="2">    <span class="op">+</span><span class="st">  </span><span class="op">+</span><span class="st">  </span><span class="op">+</span><span class="st">  </span><span class="op">+</span></a>
<a class="sourceLine" id="cb395-3" data-line-number="3">y<span class="op">:</span><span class="st">  </span><span class="dv">6</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">9</span></a>
<a class="sourceLine" id="cb395-4" data-line-number="4"><span class="op">---------------</span></a>
<a class="sourceLine" id="cb395-5" data-line-number="5"><span class="st">    </span><span class="dv">7</span>  <span class="dv">9</span> <span class="dv">11</span> <span class="dv">13</span></a></code></pre></div>
<p>What happens if you add two vectors of different lengths?</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb396-1" data-line-number="1"><span class="dv">1</span><span class="op">:</span><span class="dv">10</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb396-2" data-line-number="2"><span class="co">#&gt;  [1]  2  4  4  6  6  8  8 10 10 12</span></a></code></pre></div>
<p>Here, R will expand the shortest vector to the same length as the longest. This is called <strong>recycling</strong>. This usually (but not always) happens silently, meaning R will not warn you. Beware!</p>
</div>
<div id="for-loops" class="section level3">
<h3><span class="header-section-number">16.3.2</span> For-loops</h3>
<p>You will frequently need to iterate over vectors or data frames, perform an operation on each element, and save the results somewhere.</p>
<p>For example, imagine we have this simple dataframe:</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb397-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb397-2" data-line-number="2">  <span class="dt">a =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb397-3" data-line-number="3">  <span class="dt">b =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb397-4" data-line-number="4">  <span class="dt">c =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb397-5" data-line-number="5">  <span class="dt">d =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb397-6" data-line-number="6">)</a></code></pre></div>
<p>We want to compute the median of each column. You <em>could</em> do with copy-and-paste:</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb398-1" data-line-number="1"><span class="kw">median</span>(df<span class="op">$</span>a)</a>
<a class="sourceLine" id="cb398-2" data-line-number="2"><span class="co">#&gt; [1] -0.246</span></a>
<a class="sourceLine" id="cb398-3" data-line-number="3"><span class="kw">median</span>(df<span class="op">$</span>b)</a>
<a class="sourceLine" id="cb398-4" data-line-number="4"><span class="co">#&gt; [1] -0.287</span></a>
<a class="sourceLine" id="cb398-5" data-line-number="5"><span class="kw">median</span>(df<span class="op">$</span>c)</a>
<a class="sourceLine" id="cb398-6" data-line-number="6"><span class="co">#&gt; [1] -0.0567</span></a>
<a class="sourceLine" id="cb398-7" data-line-number="7"><span class="kw">median</span>(df<span class="op">$</span>d)</a>
<a class="sourceLine" id="cb398-8" data-line-number="8"><span class="co">#&gt; [1] 0.144</span></a></code></pre></div>
<p>But that breaks our rule of thumb: never copy and paste more than twice. Instead, we could use a <code>for</code> loop:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb399-1" data-line-number="1">output &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="kw">ncol</span>(df))  <span class="co"># 1. output</span></a>
<a class="sourceLine" id="cb399-2" data-line-number="2"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(df)) {            <span class="co"># 2. sequence</span></a>
<a class="sourceLine" id="cb399-3" data-line-number="3">  output[i] &lt;-<span class="st"> </span><span class="kw">median</span>(df[[i]])        <span class="co"># 3. body</span></a>
<a class="sourceLine" id="cb399-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb399-5" data-line-number="5">output</a>
<a class="sourceLine" id="cb399-6" data-line-number="6"><span class="co">#&gt; [1] -0.2458 -0.2873 -0.0567  0.1443</span></a></code></pre></div>
<div id="components-of-a-for-loop" class="section level4 unnumbered">
<h4>Components of a <code>for</code> Loop</h4>
<p>Every <code>for</code> loop has three components:</p>
<ol style="list-style-type: decimal">
<li>The <strong>output</strong>: <code>output &lt;- vector(&quot;double&quot;, length(x))</code>.</li>
</ol>
<p>Before you start a loop, you need to create an empty vector to store the output of the loop. Notice that the object is created <strong>outside</strong> the loop!</p>
<p>Preallocating space for your output is very important for efficiency: if you grow the <code>for</code> loop at each iteration using <code>c()</code> (for example), your <code>for</code> loop will be very slow.</p>
<ol start="2" style="list-style-type: decimal">
<li>The <strong>sequence</strong>: <code>i in seq_along(df)</code>.</li>
</ol>
<p>This determines what to loop over. In this case, the sequence is <code>seq_along(df)</code>, which creates a numeric vector for a sequence of numbers beginning at 1 and continuing until it reaches the length of <code>df</code> (the length here is the number of columns in <code>df</code>).</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb400-1" data-line-number="1"><span class="kw">seq_along</span>(df)</a>
<a class="sourceLine" id="cb400-2" data-line-number="2"><span class="co">#&gt; [1] 1 2 3 4</span></a></code></pre></div>
<p>It’s useful to think of <code>i</code> as a pronoun, like “it”. Each iteration of the <code>for</code> loop will assign <code>i</code> to a new value based on the designed sequence:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode md"><code class="sourceCode markdown"><a class="sourceLine" id="cb401-1" data-line-number="1">| Iteration | i =  |</a>
<a class="sourceLine" id="cb401-2" data-line-number="2">|-----------|------|</a>
<a class="sourceLine" id="cb401-3" data-line-number="3">| 1         | 1    | </a>
<a class="sourceLine" id="cb401-4" data-line-number="4">| 2         | 2    | </a>
<a class="sourceLine" id="cb401-5" data-line-number="5">| 3         | 3    | </a>
<a class="sourceLine" id="cb401-6" data-line-number="6">| 4         | 4    | </a>
<a class="sourceLine" id="cb401-7" data-line-number="7">=</a></code></pre></div>
<p><strong>NB:</strong> <code>seq_along</code> is a safe version of the more familiar <code>1:length(l)</code>, with an important difference: if you have a zero-length vector, <code>seq_along()</code> does the right thing:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb402-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb402-2" data-line-number="2"><span class="kw">seq_along</span>(y)</a>
<a class="sourceLine" id="cb402-3" data-line-number="3"><span class="co">#&gt; integer(0)</span></a>
<a class="sourceLine" id="cb402-4" data-line-number="4"><span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(y)</a>
<a class="sourceLine" id="cb402-5" data-line-number="5"><span class="co">#&gt; [1] 1 0</span></a></code></pre></div>
<p>You probably won’t create a zero-length vector deliberately, but it’s easy to create one accidentally. If you use <code>1:length(x)</code> instead of <code>seq_along(x)</code>, you’re likely to get a confusing error message.</p>
<ol start="3" style="list-style-type: decimal">
<li>The <strong>body</strong>: <code>output[[i]] &lt;- median(df[[i]])</code>.</li>
</ol>
<p>This is the code that does the work. It runs repeatedly, each time with a different value for <code>i</code>:</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode md"><code class="sourceCode markdown"><a class="sourceLine" id="cb403-1" data-line-number="1">| Iteration | i =  | body                           |</a>
<a class="sourceLine" id="cb403-2" data-line-number="2">|-----------|------|--------------------------------|</a>
<a class="sourceLine" id="cb403-3" data-line-number="3">| 1         | 1    | output[[1]] &lt;- median(df[[1]]) |</a>
<a class="sourceLine" id="cb403-4" data-line-number="4">| 2         | 2    | output[[2]] &lt;- median(df[[2]]) |</a>
<a class="sourceLine" id="cb403-5" data-line-number="5">| 3         | 3    | output[[3]] &lt;- median(df[[3]]) |</a>
<a class="sourceLine" id="cb403-6" data-line-number="6">| 4         | 4    | output[[4]] &lt;- median(df[[4]]) |</a></code></pre></div>
<p><strong>NB:</strong>: We use <code>[[</code> notation to reference each column of <code>df</code> using indices of columns, instead of <code>$</code> and column names.</p>
</div>
</div>
<div id="challenges-22" class="section level3">
<h3><span class="header-section-number">16.3.3</span> Challenges</h3>
<div id="challenge-1.-11" class="section level4 unnumbered">
<h4>Challenge 1.</h4>
<p>Fill in the blanks to write a <code>for</code> loop that calculates the arithmetic mean for every column in <code>mtcars</code>.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb404-1" data-line-number="1">mtcars.means &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, ______)</a>
<a class="sourceLine" id="cb404-2" data-line-number="2"><span class="cf">for</span>(i <span class="cf">in</span> ______){</a>
<a class="sourceLine" id="cb404-3" data-line-number="3">  ______[i] &lt;-<span class="st"> </span><span class="kw">mean</span>(______[[i]])</a>
<a class="sourceLine" id="cb404-4" data-line-number="4">}</a></code></pre></div>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb405-1" data-line-number="1">mtcars.means &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="kw">ncol</span>(mtcars))</a>
<a class="sourceLine" id="cb405-2" data-line-number="2"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(mtcars)){</a>
<a class="sourceLine" id="cb405-3" data-line-number="3">  mtcars.means[i] &lt;-<span class="st"> </span><span class="kw">mean</span>(mtcars[[i]])</a>
<a class="sourceLine" id="cb405-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb405-5" data-line-number="5">mtcars.means</a>
<a class="sourceLine" id="cb405-6" data-line-number="6"><span class="co">#&gt;  [1]  20.091   6.188 230.722 146.688   3.597   3.217  17.849   0.438</span></a>
<a class="sourceLine" id="cb405-7" data-line-number="7"><span class="co">#&gt;  [9]   0.406   3.688   2.812</span></a></code></pre></div>
</div>
<div id="challenge-2.-11" class="section level4 unnumbered">
<h4>Challenge 2.</h4>
<p>Check out the <code>iris</code> dataset:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb406-1" data-line-number="1"><span class="kw">kable</span>(<span class="kw">head</span>(iris))</a></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Sepal.Length
</th>
<th style="text-align:right;">
Sepal.Width
</th>
<th style="text-align:right;">
Petal.Length
</th>
<th style="text-align:right;">
Petal.Width
</th>
<th style="text-align:left;">
Species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5.1
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
</tbody>
</table>
<p>Write a <code>for</code> loop that calculates the number of unique values in each column of <code>iris</code>. Before you write the <code>for</code> loop, identify the three components you need:</p>
<ol style="list-style-type: decimal">
<li>Output</li>
<li>Sequence</li>
<li>Body</li>
</ol>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb407-1" data-line-number="1">out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="kw">ncol</span>(iris))</a>
<a class="sourceLine" id="cb407-2" data-line-number="2"><span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(iris)){</a>
<a class="sourceLine" id="cb407-3" data-line-number="3">  out[i] &lt;-<span class="st"> </span><span class="kw">length</span>(<span class="kw">unique</span>(iris[[i]]))</a>
<a class="sourceLine" id="cb407-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb407-5" data-line-number="5">out</a>
<a class="sourceLine" id="cb407-6" data-line-number="6"><span class="co">#&gt; [1] 35 23 43 22  3</span></a></code></pre></div>
</div>
<div id="challenge-3.-8" class="section level4 unnumbered">
<h4>Challenge 3.</h4>
<p>Generate 10 random normals for each of <span class="math inline">\(\mu = -10\)</span>, <span class="math inline">\(0\)</span>, <span class="math inline">\(10\)</span>, and <span class="math inline">\(100\)</span>. Store them in a list.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb408-1" data-line-number="1"><span class="co"># SOLUTION - HIDE ME</span></a>
<a class="sourceLine" id="cb408-2" data-line-number="2">mus &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb408-3" data-line-number="3"></a>
<a class="sourceLine" id="cb408-4" data-line-number="4">out &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb408-5" data-line-number="5"><span class="cf">for</span> (i <span class="cf">in</span> <span class="kw">seq_along</span>(mus)){</a>
<a class="sourceLine" id="cb408-6" data-line-number="6">  out[[i]] &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>, <span class="dt">mean =</span> mus[i])</a>
<a class="sourceLine" id="cb408-7" data-line-number="7">}</a></code></pre></div>
</div>
</div>
<div id="functional-programming-and-map" class="section level3">
<h3><span class="header-section-number">16.3.4</span> Functional Programming and <code>map</code></h3>
<p>Loops are not as important in R as they are in other languages because R is a <strong>functional</strong> programming language. This means that it’s possible to wrap up <code>for</code> loops in a function, and call that function instead of using the for loop directly.</p>
<p>The pattern of looping over a vector, doing something to each element and saving the results is so common that the <code>purrr</code> package provides a family of functions to do it for you. They effectively eliminate the need for many common <code>for</code> loops.</p>
<p>There is one function for each type of output:</p>
<ol style="list-style-type: decimal">
<li><code>map()</code> makes a list.</li>
<li><code>map_lgl()</code> makes a logical vector.</li>
<li><code>map_int()</code> makes an integer vector.</li>
<li><code>map_dbl()</code> makes a double vector.</li>
<li><code>map_chr()</code> makes a character vector.</li>
</ol>
<p>Each function takes a vector as input, applies a function to each piece, and then returns a new vector that’s the same length (and has the same names) as the input.</p>
<p><strong>NB</strong>: Some people will tell you to avoid <code>for</code> loops because they are slow. They’re wrong! (Well, at least they’re rather out of date, as for loops haven’t been slow for many years). The main benefit of using functions like <code>map()</code> is not speed, but clarity: they make your code easier to write and to read.</p>
<p>To see how <code>map</code> works, consider (again) this simple data frame:</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb409-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb409-2" data-line-number="2">  <span class="dt">a =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb409-3" data-line-number="3">  <span class="dt">b =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb409-4" data-line-number="4">  <span class="dt">c =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>),</a>
<a class="sourceLine" id="cb409-5" data-line-number="5">  <span class="dt">d =</span> <span class="kw">rnorm</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb409-6" data-line-number="6">)</a></code></pre></div>
<p>What if we wanted to calculate the mean, median, and standard deviation of each column?</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb410-1" data-line-number="1"><span class="kw">map_dbl</span>(df, mean)</a>
<a class="sourceLine" id="cb410-2" data-line-number="2"><span class="co">#&gt;      a      b      c      d </span></a>
<a class="sourceLine" id="cb410-3" data-line-number="3"><span class="co">#&gt;  0.116  0.127 -0.089  0.281</span></a>
<a class="sourceLine" id="cb410-4" data-line-number="4"><span class="kw">map_dbl</span>(df, median)</a>
<a class="sourceLine" id="cb410-5" data-line-number="5"><span class="co">#&gt;       a       b       c       d </span></a>
<a class="sourceLine" id="cb410-6" data-line-number="6"><span class="co">#&gt;  0.0583  0.0244 -0.0571  0.2604</span></a>
<a class="sourceLine" id="cb410-7" data-line-number="7"><span class="kw">map_dbl</span>(df, sd)</a>
<a class="sourceLine" id="cb410-8" data-line-number="8"><span class="co">#&gt;     a     b     c     d </span></a>
<a class="sourceLine" id="cb410-9" data-line-number="9"><span class="co">#&gt; 1.161 1.226 1.024 0.798</span></a></code></pre></div>
<p>Compared to using a for loop, this approach is much easier to read, and less error-prone.</p>
<p>The data can even be piped!</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb411-1" data-line-number="1">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(mean)</a>
<a class="sourceLine" id="cb411-2" data-line-number="2"><span class="co">#&gt;      a      b      c      d </span></a>
<a class="sourceLine" id="cb411-3" data-line-number="3"><span class="co">#&gt;  0.116  0.127 -0.089  0.281</span></a>
<a class="sourceLine" id="cb411-4" data-line-number="4">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(median)</a>
<a class="sourceLine" id="cb411-5" data-line-number="5"><span class="co">#&gt;       a       b       c       d </span></a>
<a class="sourceLine" id="cb411-6" data-line-number="6"><span class="co">#&gt;  0.0583  0.0244 -0.0571  0.2604</span></a>
<a class="sourceLine" id="cb411-7" data-line-number="7">df <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(sd)</a>
<a class="sourceLine" id="cb411-8" data-line-number="8"><span class="co">#&gt;     a     b     c     d </span></a>
<a class="sourceLine" id="cb411-9" data-line-number="9"><span class="co">#&gt; 1.161 1.226 1.024 0.798</span></a></code></pre></div>
<p>We can also pass additional arguments. For example, the function <code>mean</code> passes an optional argument <code>trim</code>. From the help file: &quot;the fraction (0 to 0.5) of observations to be trimmed from each end of <code>x</code> before the <code>mean</code>is computed.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb412-1" data-line-number="1"><span class="kw">map_dbl</span>(df, mean, <span class="dt">trim =</span> <span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb412-2" data-line-number="2"><span class="co">#&gt;       a       b       c       d </span></a>
<a class="sourceLine" id="cb412-3" data-line-number="3"><span class="co">#&gt;  0.0583  0.0244 -0.0571  0.2604</span></a></code></pre></div>
<p>Check out other fun applications of <code>map</code> functions <a href="https://r4ds.had.co.nz/iteration.html#the-map-functions">here</a></p>
</div>
<div id="challenges-23" class="section level3">
<h3><span class="header-section-number">16.3.5</span> Challenges</h3>
<div id="challenge-1.-12" class="section level4 unnumbered">
<h4>Challenge 1.</h4>
<p>Write code that uses one of the map functions to:</p>
<ol style="list-style-type: decimal">
<li>Calculates the arithmetic mean for every column in <code>mtcars</code>.</li>
</ol>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb413-1" data-line-number="1"><span class="kw">map</span>(mtcars, mean)</a></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Calculates the number of unique values in each column of <code>iris</code>.</li>
</ol>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb414-1" data-line-number="1">iris <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map</span>(unique) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">map_dbl</span>(length)</a>
<a class="sourceLine" id="cb414-2" data-line-number="2"><span class="co">#&gt; Sepal.Length  Sepal.Width Petal.Length  Petal.Width      Species </span></a>
<a class="sourceLine" id="cb414-3" data-line-number="3"><span class="co">#&gt;           35           23           43           22            3</span></a></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Generate 10 random normals for each of <span class="math inline">\(\mu = -10\)</span>, <span class="math inline">\(0\)</span>, <span class="math inline">\(10\)</span>, and <span class="math inline">\(100\)</span>.</li>
</ol>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb415-1" data-line-number="1"><span class="kw">map</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">100</span>), <span class="op">~</span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">mean =</span> .))</a>
<a class="sourceLine" id="cb415-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb415-3" data-line-number="3"><span class="co">#&gt;  [1]  -8.08  -8.70  -9.25  -9.44 -10.55  -8.89 -12.61 -10.16  -9.57 -10.38</span></a>
<a class="sourceLine" id="cb415-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb415-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb415-6" data-line-number="6"><span class="co">#&gt;  [1]  0.4242  1.0631  1.0487 -0.0381  0.4861  1.6729 -0.3544  0.9463</span></a>
<a class="sourceLine" id="cb415-7" data-line-number="7"><span class="co">#&gt;  [9]  1.3168 -0.2966</span></a>
<a class="sourceLine" id="cb415-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb415-9" data-line-number="9"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb415-10" data-line-number="10"><span class="co">#&gt;  [1]  9.61  9.21  8.94  9.20  8.24  9.31  9.44  9.46 10.23 10.98</span></a>
<a class="sourceLine" id="cb415-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb415-12" data-line-number="12"><span class="co">#&gt; [[4]]</span></a>
<a class="sourceLine" id="cb415-13" data-line-number="13"><span class="co">#&gt;  [1]  99.8  98.6 100.3  99.6 100.6 102.1 100.4  98.3 100.2 101.1</span></a></code></pre></div>
</div>
</div>
<div id="scoped-verbs" class="section level3">
<h3><span class="header-section-number">16.3.6</span> Scoped Verbs</h3>
<p>The last iteration technique we’ll discuss is scoped verbs in <code>dplyr</code>.</p>
<p>Frequently, when working with dataframes, we want to apply a function to multiple columns. For example, let’s say we want to calculate the mean value of each column in <code>mtcars</code>.</p>
<p>If we wanted to calculate the average of a single column, it would be pretty simple using just regular <code>dplyr</code> functions:</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb416-1" data-line-number="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb416-2" data-line-number="2"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mpg =</span> <span class="kw">mean</span>(mpg))</a>
<a class="sourceLine" id="cb416-3" data-line-number="3"><span class="co">#&gt;    mpg</span></a>
<a class="sourceLine" id="cb416-4" data-line-number="4"><span class="co">#&gt; 1 20.1</span></a></code></pre></div>
<p>But if we want to calculate the mean for all of them, we’d have to duplicate this code many times over:</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb417-1" data-line-number="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb417-2" data-line-number="2"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mpg =</span> <span class="kw">mean</span>(mpg),</a>
<a class="sourceLine" id="cb417-3" data-line-number="3">            <span class="dt">cyl =</span> <span class="kw">mean</span>(cyl),</a>
<a class="sourceLine" id="cb417-4" data-line-number="4">            <span class="dt">disp =</span> <span class="kw">mean</span>(disp),</a>
<a class="sourceLine" id="cb417-5" data-line-number="5">            <span class="dt">hp =</span> <span class="kw">mean</span>(hp),</a>
<a class="sourceLine" id="cb417-6" data-line-number="6">            <span class="dt">drat =</span> <span class="kw">mean</span>(drat),</a>
<a class="sourceLine" id="cb417-7" data-line-number="7">            <span class="dt">wt =</span> <span class="kw">mean</span>(wt),</a>
<a class="sourceLine" id="cb417-8" data-line-number="8">            <span class="dt">qsec =</span> <span class="kw">mean</span>(qsec),</a>
<a class="sourceLine" id="cb417-9" data-line-number="9">            <span class="dt">vs =</span> <span class="kw">mean</span>(vs),</a>
<a class="sourceLine" id="cb417-10" data-line-number="10">            <span class="dt">am =</span> <span class="kw">mean</span>(am),</a>
<a class="sourceLine" id="cb417-11" data-line-number="11">            <span class="dt">gear =</span> <span class="kw">mean</span>(gear),</a>
<a class="sourceLine" id="cb417-12" data-line-number="12">            <span class="dt">carb =</span> <span class="kw">mean</span>(carb))</a>
<a class="sourceLine" id="cb417-13" data-line-number="13"><span class="co">#&gt;    mpg  cyl disp  hp drat   wt qsec    vs    am gear carb</span></a>
<a class="sourceLine" id="cb417-14" data-line-number="14"><span class="co">#&gt; 1 20.1 6.19  231 147  3.6 3.22 17.8 0.438 0.406 3.69 2.81</span></a></code></pre></div>
<p>This is very repetitive and prone to mistakes!</p>
<p>We just saw one approach to solve this problem: <code>map</code>. Another approach is <strong>scoped verbs</strong>.</p>
<p>Scoped verbs allow you to use standard verbs (or functions) in <code>dplyr</code> that affect multiple variables at once.</p>
<ul>
<li><code>_if</code> allows you to pick variables based on a predicate function like <code>is.numeric()</code> or <code>is.character()</code></li>
<li><code>_at</code> allows you to pick variables using the same syntax as <code>select()</code></li>
<li><code>_all</code> operates on all variables</li>
</ul>
<p>These verbs can apply to <code>summarize</code>, <code>filter</code>, or <code>mutate</code>. Let’s go over <code>summarize</code>:</p>
<div id="summarize_all" class="section level4 unnumbered">
<h4><code>summarize_all()</code></h4>
<p><code>summarize_all()</code> takes a dataframe and a function and applies that function to each column:</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb418-1" data-line-number="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb418-2" data-line-number="2"><span class="st">  </span><span class="kw">summarize_all</span>(<span class="dt">.funs =</span> mean)</a>
<a class="sourceLine" id="cb418-3" data-line-number="3"><span class="co">#&gt;    mpg  cyl disp  hp drat   wt qsec    vs    am gear carb</span></a>
<a class="sourceLine" id="cb418-4" data-line-number="4"><span class="co">#&gt; 1 20.1 6.19  231 147  3.6 3.22 17.8 0.438 0.406 3.69 2.81</span></a></code></pre></div>
</div>
<div id="summarize_at" class="section level4 unnumbered">
<h4><code>summarize_at()</code></h4>
<p><code>summarize_at()</code> allows you to pick columns in the same way as <code>select()</code>, that is, based on their names. There is one small difference: you need to wrap the complete selection with the <code>vars()</code> helper (this avoids ambiguity).</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb419-1" data-line-number="1">mtcars <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb419-2" data-line-number="2"><span class="st">  </span><span class="kw">summarize_at</span>(<span class="dt">.vars =</span> <span class="kw">vars</span>(mpg, wt), <span class="dt">.funs =</span> mean)</a>
<a class="sourceLine" id="cb419-3" data-line-number="3"><span class="co">#&gt;    mpg   wt</span></a>
<a class="sourceLine" id="cb419-4" data-line-number="4"><span class="co">#&gt; 1 20.1 3.22</span></a></code></pre></div>
</div>
<div id="summarize_if" class="section level4 unnumbered">
<h4><code>summarize_if()</code></h4>
<p><code>summarize_if()</code> allows you to pick variables to summarize based on some property of the column. For example, what if we want to apply a numeric summary function only to numeric columns:</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb420-1" data-line-number="1">iris <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb420-2" data-line-number="2"><span class="st">  </span><span class="kw">summarize_if</span>(<span class="dt">.predicate =</span> is.numeric, <span class="dt">.funs =</span> mean)</a>
<a class="sourceLine" id="cb420-3" data-line-number="3"><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width</span></a>
<a class="sourceLine" id="cb420-4" data-line-number="4"><span class="co">#&gt; 1         5.84        3.06         3.76         1.2</span></a></code></pre></div>
<p><code>mutate</code> and <code>filter</code> work in a similar way. To see more, check out <a href="https://dcl-2017-04.github.io/curriculum/manip-scoped.html">Scoped verbs by the Data Challenge Lab</a></p>
</div>
<div id="acknowledgments-6" class="section level4 unnumbered">
<h4>Acknowledgments</h4>
<p>A good portion of this lesson is based on:</p>
<ul>
<li><a href="https://r4ds.had.co.nz/iteration.html">R for Data Science</a></li>
<li><a href="https://cfss.uchicago.edu/notes/iteration/">Computing for Social Sciences</a></li>
</ul>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="strings-and-regular-expressions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="collecting-data-from-the-web.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rochelleterman/plsc-31101/edit/master/13-Programming/13-1_Conditional-Flow.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["https://github.com/rochelleterman/plsc-31101/raw/master/13-Programming/13-1_Conditional-Flow.Rmd"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>

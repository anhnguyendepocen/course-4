---
title: "R Studio"
author: "PLSC 31101"
date: "Fall 2019"
output: html_document
---

## R Studio 

We can use R in a number of ways. For example, we can write R code in a plain text editor (like `textedit` or `notepad`), and then execute the sript using the shell (e.g. `terminal` in Mac).

But it's not exactly ideal. We can't easily write and edit scripts as we go. It's not very pretty. There are no debugging tools. That's why most people who use R (or Python, etc) use an "integrated development environment" or "interactive development environment" (IDE).

An IDE is a software application that provides comprehensive facilities to computer programmers for software development. An IDE normally consists of a source code editor, build automation tools and a debugger. Some of them come with package managers and other features, too.

The most popular IDE for R is [RStudio](https://www.rstudio.com/products/rstudio/).It includes a console, syntax-highlighting editor that supports direct code execution, as well as tools for plotting, history, debugging and workspace management. It's also free and open-source. Yay!

### Console

There are two main ways of interacting with R: using the __console__ or by using the __script editor__.

The console window (in RStudio, the bottom left panel) is the place where R is waiting for you to tell it what to do, and where it will show the results of a command.  

You can type commands directly into the console, but they will be forgotten when you close the session. Try it out now.

```{r eval = F}
> 2 + 2
```

If R is ready to accept commands, the R console shows a `>` prompt. If it receives a command (by typing, copy-pasting or sent from the script editor using `Ctrl-Enter`), R will try to execute it, and when ready, show the results and come back with a new `>`-prompt to wait for new commands.

If R is still waiting for you to enter more data because it isn't complete yet, the console will show a `+` prompt. It means that you haven't finished entering a complete command. This is because you have not 'closed' a parenthesis or quotation. If you're in RStudio and this happens, click inside the console window and press `Esc`; this should help you out of trouble.

```{r eval = F}
> "This is an incomplete quote
+
```

#### More Console Features {-}

1. Retreiving previous commands: As you work with R you'll often want to re-execute a command which you previously entered. Recall previous commands using the up and down arrow keys.

2. Console title bar: This screenshot illustrates a few additional capabilities provided by the Console title bar:

    * Display of the current working directory.
    * The ability to interrupt R during a long computation.
    * Minimizing and maximizing the Console in relation to the Source pane (using the buttons at the top-right or by double-clicking the title bar).

```{r echo = F}
knitr::include_graphics(path = "img/using_console_title_bar.png")
```

### Scripts

It is better to enter the commands in the script editor, and save the script. This way, you have a complete record of what you did, you can easily show others how you did it and you can do it again later on if needed. Open it up either by clicking the *File* menu, and selecting *New File*, then R script, or using the keyboard shortcut Cmd/Ctrl + Shift + N. Now you’ll see four panes.

```{r echo = F}
knitr::include_graphics(path = "./img/4-panes.png")
```

The script editor is a great place to put code you care about. Keep experimenting in the console, but once you have written code that works and does what you want, put it in the script editor. 

RStudio will automatically save the contents of the editor when you quit RStudio, and will automatically load it when you re-open. Nevertheless, it’s a good idea to save your scripts regularly and to back them up.

### Running code

You can copy-paste code from the editor into the console, but there is a better way. The key to using the script editor effectively is to memorise one of the most important keyboard shortcuts: __`Cmd/Ctrl + Enter`__. This executes the current R expression in the console.

For example, take the code below. If your cursor is somewhere on the first line, pressing `Cmd/Ctrl + Enter` will run the complete command that generates `dems`. It will also move the cursor to the next statement (beginning with `reps`). That makes it easy to run your complete script by repeatedly pressing `Cmd/Ctrl + Enter`.

```{r}
dems <- (55 + 70) * 1.3

reps <- (20 - 1) / 2
```

Instead of running expression-by-expression, you can also execute the complete script in one step: `Cmd/Ctrl + Shift + S`. Doing this regularly is a great way to check that you’ve captured all the important parts of your code in the script.

### Comments

Use `#` signs to comment. Comment liberally in your R scripts. Anything to the right of a `#` is ignored by R. Add a # to each line of comments.

```{r}
# This is a comment.
# This is another line of comments.
```

### Diagnostics and errors

The script editor will also highlight syntax errors with a red squiggly line and a cross in the sidebar:

```{r echo = F}
knitr::include_graphics(path = "img/rstudio-diagnostic.png")
```

Hover over the cross to see what the problem is:

```{r echo = F}
knitr::include_graphics(path = "img/rstudio-diagnostic-tip.png")
```

If you try to execute the code, you'll see an error in the console.

```{r echo = F}
knitr::include_graphics(path = "img/error.png")
```

When errors happen, your code is haulted -- meaning it's never executed. Errors can be frustrating in R, but with practice you'll be able to debug your code quickly.

###  R Environment

Turn your attention to the upper right pane. This pane displays your "global environment", and it contains the data objects you have saved in your current session. Notice that we have the two objects created earlier, `dems`, and `reps`, along with their values.

We can list all objects in your current environment by running:

```{r}
ls()
```

Sometimes we want to remove objects that we no longer need.

```{r}
x <- 5
rm(x)
```

If we want to remove all objects from your current environment, we can run:

```{r}
rm(list = ls())
```

####  Acknowledgments {-}

This page is in part derived from the following sources:

1. [R Studio Support](https://support.rstudio.com/hc/en-us/articles/200484448).

2. [Advanced R](https://adv-r.hadley.nz/), licensed under the [Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International Public License](https://creativecommons.org/licenses/by-nc-sa/4.0/)

3. [R for Data Science](https://r4ds.had.co.nz) licensed under [Creative Commons Attribution-NonCommercial-NoDerivs 3.0](https://creativecommons.org/licenses/by-nc-nd/3.0/us/)
